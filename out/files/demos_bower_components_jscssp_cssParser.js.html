<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>demos\bower_components\jscssp\cssParser.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/fabric.BaseBrush.html">fabric.BaseBrush</a></li>
                                <li><a href="../classes/fabric.Canvas.html">fabric.Canvas</a></li>
                                <li><a href="../classes/fabric.Circle.html">fabric.Circle</a></li>
                                <li><a href="../classes/fabric.CircleBrush.html">fabric.CircleBrush</a></li>
                                <li><a href="../classes/fabric.Color.html">fabric.Color</a></li>
                                <li><a href="../classes/fabric.Element.html">fabric.Element</a></li>
                                <li><a href="../classes/fabric.Ellipse.html">fabric.Ellipse</a></li>
                                <li><a href="../classes/fabric.Gradient.html">fabric.Gradient</a></li>
                                <li><a href="../classes/fabric.Group.html">fabric.Group</a></li>
                                <li><a href="../classes/fabric.Image.filters.BaseFilter.html">fabric.Image.filters.BaseFilter</a></li>
                                <li><a href="../classes/fabric.Image.filters.Brightness.html">fabric.Image.filters.Brightness</a></li>
                                <li><a href="../classes/fabric.Image.filters.Convolute.html">fabric.Image.filters.Convolute</a></li>
                                <li><a href="../classes/fabric.Image.filters.Creates an instance of a PdfPrinter which turns document definition into a pdf.html">fabric.Image.filters.Creates an instance of a PdfPrinter which turns document definition into a pdf</a></li>
                                <li><a href="../classes/fabric.Image.filters.fabric.Image.html">fabric.Image.filters.fabric.Image</a></li>
                                <li><a href="../classes/fabric.Image.filters.fabric.Image.filter.Blend.html">fabric.Image.filters.fabric.Image.filter.Blend</a></li>
                                <li><a href="../classes/fabric.Image.filters.fabric.IText.html">fabric.Image.filters.fabric.IText</a></li>
                                <li><a href="../classes/fabric.Image.filters.fabric.Text.html">fabric.Image.filters.fabric.Text</a></li>
                                <li><a href="../classes/fabric.Image.filters.GradientTransparency.html">fabric.Image.filters.GradientTransparency</a></li>
                                <li><a href="../classes/fabric.Image.filters.Grayscale.html">fabric.Image.filters.Grayscale</a></li>
                                <li><a href="../classes/fabric.Image.filters.Invert.html">fabric.Image.filters.Invert</a></li>
                                <li><a href="../classes/fabric.Image.filters.Mask.html">fabric.Image.filters.Mask</a></li>
                                <li><a href="../classes/fabric.Image.filters.Multiply.html">fabric.Image.filters.Multiply</a></li>
                                <li><a href="../classes/fabric.Image.filters.Noise.html">fabric.Image.filters.Noise</a></li>
                                <li><a href="../classes/fabric.Image.filters.Pixelate.html">fabric.Image.filters.Pixelate</a></li>
                                <li><a href="../classes/fabric.Image.filters.RemoveWhite.html">fabric.Image.filters.RemoveWhite</a></li>
                                <li><a href="../classes/fabric.Image.filters.Resize.html">fabric.Image.filters.Resize</a></li>
                                <li><a href="../classes/fabric.Image.filters.Sepia.html">fabric.Image.filters.Sepia</a></li>
                                <li><a href="../classes/fabric.Image.filters.Sepia2.html">fabric.Image.filters.Sepia2</a></li>
                                <li><a href="../classes/fabric.Image.filters.Tint.html">fabric.Image.filters.Tint</a></li>
                                <li><a href="../classes/fabric.Intersection.html">fabric.Intersection</a></li>
                                <li><a href="../classes/fabric.Line.html">fabric.Line</a></li>
                                <li><a href="../classes/fabric.Object.html">fabric.Object</a></li>
                                <li><a href="../classes/fabric.Path.html">fabric.Path</a></li>
                                <li><a href="../classes/fabric.PathGroup.html">fabric.PathGroup</a></li>
                                <li><a href="../classes/fabric.Pattern.html">fabric.Pattern</a></li>
                                <li><a href="../classes/fabric.PatternBrush.html">fabric.PatternBrush</a></li>
                                <li><a href="../classes/fabric.PencilBrush.html">fabric.PencilBrush</a></li>
                                <li><a href="../classes/fabric.Point.html">fabric.Point</a></li>
                                <li><a href="../classes/fabric.Polygon.html">fabric.Polygon</a></li>
                                <li><a href="../classes/fabric.Polyline.html">fabric.Polyline</a></li>
                                <li><a href="../classes/fabric.Rect.html">fabric.Rect</a></li>
                                <li><a href="../classes/fabric.Shadow.html">fabric.Shadow</a></li>
                                <li><a href="../classes/fabric.SprayBrush.html">fabric.SprayBrush</a></li>
                                <li><a href="../classes/fabric.StaticCanvas.html">fabric.StaticCanvas</a></li>
                                <li><a href="../classes/fabric.Triangle.html">fabric.Triangle</a></li>
                                <li><a href="../classes/google/Area.html">google/Area</a></li>
                                <li><a href="../classes/google/Bar.html">google/Bar</a></li>
                                <li><a href="../classes/google/Common.html">google/Common</a></li>
                                <li><a href="../classes/google/CommonND.html">google/CommonND</a></li>
                                <li><a href="../classes/jsPDF.html">jsPDF</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/google_Area.html">google/Area</a></li>
                                <li><a href="../modules/google_Bar.html">google/Bar</a></li>
                                <li><a href="../modules/google_Common.html">google/Common</a></li>
                                <li><a href="../modules/google_CommonND.html">google/CommonND</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: demos\bower_components\jscssp\cssParser.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/* ***** BEGIN LICENSE BLOCK *****
 * Version: MPL 1.1/GPL 2.0/LGPL 2.1
 *
 * The contents of this file are subject to the Mozilla Public License Version
 * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with
 * the License. You may obtain a copy of the License at
 * http://www.mozilla.org/MPL/
 *
 * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 * for the specific language governing rights and limitations under the
 * License.
 *
 * The Original Code is mozilla.org code.
 *
 * The Initial Developer of the Original Code is
 * Netscape Communications Corporation.
 * Portions created by the Initial Developer are Copyright (C) 1998
 * the Initial Developer. All Rights Reserved.
 *
 * Contributor(s):
 *   emk &lt;VYV03354@nifty.ne.jp&gt;
 *   Daniel Glazman &lt;glazman@netscape.com&gt;
 *   L. David Baron &lt;dbaron@dbaron.org&gt;
 *   Boris Zbarsky &lt;bzbarsky@mit.edu&gt;
 *   Mats Palmgren &lt;mats.palmgren@bredband.net&gt;
 *   Christian Biesinger &lt;cbiesinger@web.de&gt;
 *   Jeff Walden &lt;jwalden+code@mit.edu&gt;
 *   Jonathon Jongsma &lt;jonathon.jongsma@collabora.co.uk&gt;, Collabora Ltd.
 *   Siraj Razick &lt;siraj.razick@collabora.co.uk&gt;, Collabora Ltd.
 *   Daniel Glazman &lt;daniel.glazman@disruptive-innovations.com&gt;
 *
 * Alternatively, the contents of this file may be used under the terms of
 * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),
 * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),
 * in which case the provisions of the GPL or the LGPL are applicable instead
 * of those above. If you wish to allow use of your version of this file only
 * under the terms of either the GPL or the LGPL, and not to allow others to
 * use your version of this file under the terms of the MPL, indicate your
 * decision by deleting the provisions above and replace them with the notice
 * and other provisions required by the GPL or the LGPL. If you do not delete
 * the provisions above, a recipient may use your version of this file under
 * the terms of any one of the MPL, the GPL or the LGPL.
 *
 * ***** END LICENSE BLOCK ***** */

var kCHARSET_RULE_MISSING_SEMICOLON = &quot;Missing semicolon at the end of @charset rule&quot;;
var kCHARSET_RULE_CHARSET_IS_STRING = &quot;The charset in the @charset rule should be a string&quot;;
var kCHARSET_RULE_MISSING_WS = &quot;Missing mandatory whitespace after @charset&quot;;
var kIMPORT_RULE_MISSING_URL = &quot;Missing URL in @import rule&quot;;
var kURL_EOF = &quot;Unexpected end of stylesheet&quot;;
var kURL_WS_INSIDE = &quot;Multiple tokens inside a url() notation&quot;;
var kVARIABLES_RULE_POSITION = &quot;@variables rule invalid at this position in the stylesheet&quot;;
var kIMPORT_RULE_POSITION = &quot;@import rule invalid at this position in the stylesheet&quot;;
var kNAMESPACE_RULE_POSITION = &quot;@namespace rule invalid at this position in the stylesheet&quot;;
var kCHARSET_RULE_CHARSET_SOF = &quot;@charset rule invalid at this position in the stylesheet&quot;;
var kUNKNOWN_AT_RULE = &quot;Unknow @-rule&quot;;

/* FROM http://peter.sh/data/vendor-prefixed-css.php?js=1 */

var kCSS_VENDOR_VALUES = {
  &quot;-moz-box&quot;:             {&quot;webkit&quot;: &quot;-webkit-box&quot;,        &quot;presto&quot;: &quot;&quot;, &quot;trident&quot;: &quot;&quot;, &quot;generic&quot;: &quot;box&quot; },
  &quot;-moz-inline-box&quot;:      {&quot;webkit&quot;: &quot;-webkit-inline-box&quot;, &quot;presto&quot;: &quot;&quot;, &quot;trident&quot;: &quot;&quot;, &quot;generic&quot;: &quot;inline-box&quot; },
  &quot;-moz-initial&quot;:         {&quot;webkit&quot;: &quot;&quot;,                   &quot;presto&quot;: &quot;&quot;, &quot;trident&quot;: &quot;&quot;, &quot;generic&quot;: &quot;initial&quot; },
  &quot;flex&quot;:                 {&quot;webkit&quot;: &quot;-webkit-flex&quot;,       &quot;presto&quot;: &quot;&quot;, &quot;trident&quot;: &quot;&quot;, &quot;generic&quot;: &quot;&quot; },
  &quot;inline-flex&quot;:          {&quot;webkit&quot;: &quot;-webkit-inline-flex&quot;, &quot;presto&quot;: &quot;&quot;, &quot;trident&quot;: &quot;&quot;, &quot;generic&quot;: &quot;&quot; },

  &quot;linear-gradient&quot;: {&quot;webkit20110101&quot;:FilterLinearGradient,
                           &quot;webkit&quot;: FilterLinearGradient,
                           &quot;presto&quot;: FilterLinearGradient,
                           &quot;trident&quot;: FilterLinearGradient,
                           &quot;gecko1.9.2&quot;: FilterLinearGradient },
  &quot;repeating-linear-gradient&quot;: {&quot;webkit20110101&quot;:FilterLinearGradient,
                           &quot;webkit&quot;: FilterLinearGradient,
                           &quot;presto&quot;: FilterLinearGradient,
                           &quot;trident&quot;: FilterLinearGradient,
                           &quot;gecko1.9.2&quot;: FilterLinearGradient },

  &quot;radial-gradient&quot;: {&quot;webkit20110101&quot;:FilterRadialGradient,
                           &quot;webkit&quot;: FilterRadialGradient,
                           &quot;presto&quot;: FilterRadialGradient,
                           &quot;trident&quot;: FilterRadialGradient,
                           &quot;gecko1.9.2&quot;: FilterRadialGradient },
  &quot;repeating-radial-gradient&quot;: {&quot;webkit20110101&quot;:FilterRadialGradient,
                           &quot;webkit&quot;: FilterRadialGradient,
                           &quot;presto&quot;: FilterRadialGradient,
                           &quot;trident&quot;: FilterRadialGradient,
                           &quot;gecko1.9.2&quot;: FilterRadialGradient }
};

var kCSS_PREFIXED_VALUE = [
  {&quot;gecko&quot;: &quot;-moz-box&quot;, &quot;webkit&quot;: &quot;-moz-box&quot;, &quot;presto&quot;: &quot;&quot;, &quot;trident&quot;: &quot;&quot;, &quot;generic&quot;: &quot;box&quot;}
];

var kCSS_VENDOR_PREFIXES = 
{&quot;lastUpdate&quot;:1374677405,&quot;properties&quot;:[
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-accelerator&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-wap-accesskey&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-align-content&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;align-items&quot;,&quot;webkit&quot;:&quot;-webkit-align-items&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;align-self&quot;,&quot;webkit&quot;:&quot;-webkit-align-self&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;animation&quot;,&quot;webkit&quot;:&quot;-webkit-animation&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;animation&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;animation-delay&quot;,&quot;webkit&quot;:&quot;-webkit-animation-delay&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;animation-delay&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;animation-direction&quot;,&quot;webkit&quot;:&quot;-webkit-animation-direction&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;animation-direction&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;animation-duration&quot;,&quot;webkit&quot;:&quot;-webkit-animation-duration&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;animation-duration&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;animation-fill-mode&quot;,&quot;webkit&quot;:&quot;-webkit-animation-fill-mode&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;animation-fill-mode&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;animation-iteration-count&quot;,&quot;webkit&quot;:&quot;-webkit-animation-iteration-count&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;animation-iteration-count&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;animation-name&quot;,&quot;webkit&quot;:&quot;-webkit-animation-name&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;animation-name&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;animation-play-state&quot;,&quot;webkit&quot;:&quot;-webkit-animation-play-state&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;animation-play-state&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;animation-timing-function&quot;,&quot;webkit&quot;:&quot;-webkit-animation-timing-function&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;animation-timing-function&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-app-region&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-appearance&quot;,&quot;webkit&quot;:&quot;-webkit-appearance&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-aspect-ratio&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;backface-visibility&quot;,&quot;webkit&quot;:&quot;-webkit-backface-visibility&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;backface-visibility&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-background-blend-mode&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;background-clip&quot;,&quot;webkit&quot;:&quot;-webkit-background-clip&quot;,&quot;presto&quot;:&quot;background-clip&quot;,&quot;trident&quot;:&quot;background-clip&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-background-composite&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-background-inline-policy&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;background-origin&quot;,&quot;webkit&quot;:&quot;-webkit-background-origin&quot;,&quot;presto&quot;:&quot;background-origin&quot;,&quot;trident&quot;:&quot;background-origin&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;background-position-x&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-background-position-x&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;background-position-y&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-background-position-y&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;background-size&quot;,&quot;webkit&quot;:&quot;-webkit-background-size&quot;,&quot;presto&quot;:&quot;background-size&quot;,&quot;trident&quot;:&quot;background-size&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-behavior&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-binding&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-blend-mode&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-block-progression&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-after&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-after-color&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-after-style&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-after-width&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-before&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-before-color&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-before-style&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-before-width&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-border-bottom-colors&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;border-bottom-left-radius&quot;,&quot;webkit&quot;:&quot;-webkit-border-bottom-left-radius&quot;,&quot;presto&quot;:&quot;border-bottom-left-radius&quot;,&quot;trident&quot;:&quot;border-bottom-left-radius&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;border-bottom-right-radius&quot;,&quot;webkit&quot;:&quot;-webkit-border-bottom-right-radius&quot;,&quot;presto&quot;:&quot;border-bottom-right-radius&quot;,&quot;trident&quot;:&quot;border-bottom-right-radius&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-border-end&quot;,&quot;webkit&quot;:&quot;-webkit-border-end&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-border-end-color&quot;,&quot;webkit&quot;:&quot;-webkit-border-end-color&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-border-end-style&quot;,&quot;webkit&quot;:&quot;-webkit-border-end-style&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-border-end-width&quot;,&quot;webkit&quot;:&quot;-webkit-border-end-width&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-fit&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-horizontal-spacing&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;border-image&quot;,&quot;webkit&quot;:&quot;-webkit-border-image&quot;,&quot;presto&quot;:&quot;-o-border-image&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-border-left-colors&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;border-radius&quot;,&quot;webkit&quot;:&quot;-webkit-border-radius&quot;,&quot;presto&quot;:&quot;border-radius&quot;,&quot;trident&quot;:&quot;border-radius&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-border-right-colors&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-border-start&quot;,&quot;webkit&quot;:&quot;-webkit-border-start&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-border-start-color&quot;,&quot;webkit&quot;:&quot;-webkit-border-start-color&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-border-start-style&quot;,&quot;webkit&quot;:&quot;-webkit-border-start-style&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-border-start-width&quot;,&quot;webkit&quot;:&quot;-webkit-border-start-width&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-border-top-colors&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;border-top-left-radius&quot;,&quot;webkit&quot;:&quot;-webkit-border-top-left-radius&quot;,&quot;presto&quot;:&quot;border-top-left-radius&quot;,&quot;trident&quot;:&quot;border-top-left-radius&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;border-top-right-radius&quot;,&quot;webkit&quot;:&quot;-webkit-border-top-right-radius&quot;,&quot;presto&quot;:&quot;border-top-right-radius&quot;,&quot;trident&quot;:&quot;border-top-right-radius&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-border-vertical-spacing&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-box-align&quot;,&quot;webkit&quot;:&quot;-webkit-box-align&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-box-decoration-break&quot;,&quot;presto&quot;:&quot;box-decoration-break&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-box-direction&quot;,&quot;webkit&quot;:&quot;-webkit-box-direction&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-box-flex&quot;,&quot;webkit&quot;:&quot;-webkit-box-flex&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-box-flex-group&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-box-lines&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-box-ordinal-group&quot;,&quot;webkit&quot;:&quot;-webkit-box-ordinal-group&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-box-orient&quot;,&quot;webkit&quot;:&quot;-webkit-box-orient&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-box-pack&quot;,&quot;webkit&quot;:&quot;-webkit-box-pack&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-box-reflect&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;box-shadow&quot;,&quot;webkit&quot;:&quot;-webkit-box-shadow&quot;,&quot;presto&quot;:&quot;box-shadow&quot;,&quot;trident&quot;:&quot;box-shadow&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-box-sizing&quot;,&quot;webkit&quot;:&quot;-webkit-box-sizing&quot;,&quot;presto&quot;:&quot;box-sizing&quot;,&quot;trident&quot;:&quot;box-sizing&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;caption-side&quot;,&quot;webkit&quot;:&quot;-epub-caption-side&quot;,&quot;presto&quot;:&quot;caption-side&quot;,&quot;trident&quot;:&quot;caption-side&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;clip-path&quot;,&quot;webkit&quot;:&quot;-webkit-clip-path&quot;,&quot;presto&quot;:&quot;clip-path&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-color-correction&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-column-axis&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-column-break-after&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-column-break-before&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-column-break-inside&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-column-count&quot;,&quot;webkit&quot;:&quot;-webkit-column-count&quot;,&quot;presto&quot;:&quot;column-count&quot;,&quot;trident&quot;:&quot;column-count&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;-moz-column-fill&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;column-fill&quot;,&quot;trident&quot;:&quot;column-fill&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;-moz-column-gap&quot;,&quot;webkit&quot;:&quot;-webkit-column-gap&quot;,&quot;presto&quot;:&quot;column-gap&quot;,&quot;trident&quot;:&quot;column-gap&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-column-progression&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-column-rule&quot;,&quot;webkit&quot;:&quot;-webkit-column-rule&quot;,&quot;presto&quot;:&quot;column-rule&quot;,&quot;trident&quot;:&quot;column-rule&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;-moz-column-rule-color&quot;,&quot;webkit&quot;:&quot;-webkit-column-rule-color&quot;,&quot;presto&quot;:&quot;column-rule-color&quot;,&quot;trident&quot;:&quot;column-rule-color&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;-moz-column-rule-style&quot;,&quot;webkit&quot;:&quot;-webkit-column-rule-style&quot;,&quot;presto&quot;:&quot;column-rule-style&quot;,&quot;trident&quot;:&quot;column-rule-style&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;-moz-column-rule-width&quot;,&quot;webkit&quot;:&quot;-webkit-column-rule-width&quot;,&quot;presto&quot;:&quot;column-rule-width&quot;,&quot;trident&quot;:&quot;column-rule-width&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-column-span&quot;,&quot;presto&quot;:&quot;column-span&quot;,&quot;trident&quot;:&quot;column-span&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;-moz-column-width&quot;,&quot;webkit&quot;:&quot;-webkit-column-width&quot;,&quot;presto&quot;:&quot;column-width&quot;,&quot;trident&quot;:&quot;column-width&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;-moz-columns&quot;,&quot;webkit&quot;:&quot;-webkit-columns&quot;,&quot;presto&quot;:&quot;columns&quot;,&quot;trident&quot;:&quot;columns&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-content-zoom-chaining&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-content-zoom-limit&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-content-zoom-limit-max&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-content-zoom-limit-min&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-content-zoom-snap&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-content-zoom-snap-points&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-content-zoom-snap-type&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-content-zooming&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-cursor-visibility&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-dashboard-region&quot;,&quot;presto&quot;:&quot;-apple-dashboard-region&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-o-device-pixel-ratio&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;filter&quot;,&quot;webkit&quot;:&quot;-webkit-filter&quot;,&quot;presto&quot;:&quot;filter&quot;,&quot;trident&quot;:&quot;-ms-filter&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;flex&quot;,&quot;webkit&quot;:&quot;-webkit-flex&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-flex&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-flex-align&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;flex-basis&quot;,&quot;webkit&quot;:&quot;-webkit-flex-basis&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;flex-direction&quot;,&quot;webkit&quot;:&quot;-webkit-flex-direction&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-flex-direction&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-flex-flow&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;flex-grow&quot;,&quot;webkit&quot;:&quot;-webkit-flex-grow&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-flex-order&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-flex-pack&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;flex-shrink&quot;,&quot;webkit&quot;:&quot;-webkit-flex-shrink&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-flex-wrap&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-flex-wrap&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-float-edge&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-flow-from&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-flow-from&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-flow-into&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-flow-into&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-o-focus-opacity&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-font-feature-settings&quot;,&quot;webkit&quot;:&quot;-webkit-font-feature-settings&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;font-feature-settings&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;font-kerning&quot;,&quot;webkit&quot;:&quot;-webkit-font-kerning&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-font-language-override&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-font-size-delta&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-font-smoothing&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;font-variant-ligatures&quot;,&quot;webkit&quot;:&quot;-webkit-font-variant-ligatures&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-force-broken-image-icon&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-after&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-auto-columns&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-auto-flow&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-auto-rows&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-before&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-column&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-grid-column&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-grid-column-align&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-grid-column-span&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-grid-columns&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-definition-columns&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-definition-rows&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-end&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-row&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-grid-row&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-grid-row-align&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-grid-row-span&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-grid-rows&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-grid-start&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-high-contrast-adjust&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-highlight&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-hyphenate-character&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-hyphenate-limit-after&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-hyphenate-limit-before&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-hyphenate-limit-chars&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-hyphenate-limit-lines&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-hyphenate-limit-lines&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-hyphenate-limit-zone&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-hyphens&quot;,&quot;webkit&quot;:&quot;-epub-hyphens&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-hyphens&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-image-region&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;ime-mode&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-ime-mode&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-wap-input-format&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-wap-input-required&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-interpolation-mode&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-xv-interpret-as&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;justify-content&quot;,&quot;webkit&quot;:&quot;-webkit-justify-content&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-layout-flow&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-layout-grid&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-layout-grid-char&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-layout-grid-line&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-layout-grid-mode&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-layout-grid-type&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-line-align&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-line-box-contain&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-line-break&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;line-break&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-line-clamp&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-line-grid&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-line-snap&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-o-link&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-o-link-source&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-locale&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-logical-height&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-logical-width&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-margin-after&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-margin-after-collapse&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-margin-before&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-margin-before-collapse&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-margin-bottom-collapse&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-margin-collapse&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-margin-end&quot;,&quot;webkit&quot;:&quot;-webkit-margin-end&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-margin-start&quot;,&quot;webkit&quot;:&quot;-webkit-margin-start&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-margin-top-collapse&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-marquee&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-wap-marquee-dir&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-marquee-direction&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-marquee-increment&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-wap-marquee-loop&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-marquee-repetition&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-marquee-speed&quot;,&quot;presto&quot;:&quot;-wap-marquee-speed&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-marquee-style&quot;,&quot;presto&quot;:&quot;-wap-marquee-style&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;mask&quot;,&quot;webkit&quot;:&quot;-webkit-mask&quot;,&quot;presto&quot;:&quot;mask&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-box-image&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-box-image-outset&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-box-image-repeat&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-box-image-slice&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-box-image-source&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-box-image-width&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-clip&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-composite&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-image&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-origin&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-position&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-position-x&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-position-y&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-repeat&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-repeat-x&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-repeat-y&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-mask-size&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-max-logical-height&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-max-logical-width&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-min-logical-height&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-min-logical-width&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-o-mini-fold&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-nbsp-mode&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-o-object-fit&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-o-object-position&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;opacity&quot;,&quot;webkit&quot;:&quot;-webkit-opacity&quot;,&quot;presto&quot;:&quot;opacity&quot;,&quot;trident&quot;:&quot;opacity&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;order&quot;,&quot;webkit&quot;:&quot;-webkit-order&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-orient&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-outline-radius&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-outline-radius-bottomleft&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-outline-radius-bottomright&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-outline-radius-topleft&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-outline-radius-topright&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-overflow-scrolling&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-overflow-style&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;overflow-x&quot;,&quot;webkit&quot;:&quot;overflow-x&quot;,&quot;presto&quot;:&quot;overflow-x&quot;,&quot;trident&quot;:&quot;-ms-overflow-x&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;overflow-y&quot;,&quot;webkit&quot;:&quot;overflow-y&quot;,&quot;presto&quot;:&quot;overflow-y&quot;,&quot;trident&quot;:&quot;-ms-overflow-y&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-padding-after&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-padding-before&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-padding-end&quot;,&quot;webkit&quot;:&quot;-webkit-padding-end&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;-moz-padding-start&quot;,&quot;webkit&quot;:&quot;-webkit-padding-start&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;perspective&quot;,&quot;webkit&quot;:&quot;-webkit-perspective&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;perspective&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;perspective-origin&quot;,&quot;webkit&quot;:&quot;-webkit-perspective-origin&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;perspective-origin&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-perspective-origin-x&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-perspective-origin-y&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-xv-phonemes&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-print-color-adjust&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-progress-appearance&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-region-break-after&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-region-break-before&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-region-break-inside&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-region-fragment&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-rtl-ordering&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-ruby-position&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;ruby-position&quot;,&quot;status&quot;:&quot;CR&quot;},
{&quot;gecko&quot;:&quot;-moz-script-level&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-script-min-size&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-script-size-multiplier&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-chaining&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-limit&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-limit-x-max&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-limit-x-min&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-limit-y-max&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-limit-y-min&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-rails&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-snap-points-x&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-snap-points-y&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-snap-type&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-snap-x&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-snap-y&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-scroll-translation&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;scrollbar-arrow-color&quot;,&quot;trident&quot;:&quot;-ms-scrollbar-arrow-color&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;scrollbar-base-color&quot;,&quot;trident&quot;:&quot;-ms-scrollbar-base-color&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;scrollbar-darkshadow-color&quot;,&quot;trident&quot;:&quot;-ms-scrollbar-darkshadow-color&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;scrollbar-face-color&quot;,&quot;trident&quot;:&quot;-ms-scrollbar-face-color&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;scrollbar-highlight-color&quot;,&quot;trident&quot;:&quot;-ms-scrollbar-highlight-color&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;scrollbar-shadow-color&quot;,&quot;trident&quot;:&quot;-ms-scrollbar-shadow-color&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;scrollbar-track-color&quot;,&quot;trident&quot;:&quot;-ms-scrollbar-track-color&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-shape-inside&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-shape-margin&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-shape-outside&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-shape-padding&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-stack-sizing&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-svg-shadow&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-tab-size&quot;,&quot;webkit&quot;:&quot;tab-size&quot;,&quot;presto&quot;:&quot;-o-tab-size&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-o-table-baseline&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-tap-highlight-color&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-text-align-last&quot;,&quot;webkit&quot;:&quot;-webkit-text-align-last&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-text-align-last&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-text-autospace&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;-moz-text-blink&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-epub-text-combine&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-text-decoration-color&quot;,&quot;webkit&quot;:&quot;-webkit-text-decoration-color&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-text-decoration-line&quot;,&quot;webkit&quot;:&quot;-webkit-text-decoration-line&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-text-decoration-style&quot;,&quot;webkit&quot;:&quot;-webkit-text-decoration-style&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-text-decorations-in-effect&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-epub-text-emphasis&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-epub-text-emphasis-color&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-text-emphasis-position&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-epub-text-emphasis-style&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-text-fill-color&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-text-justify&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-text-justify&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-text-kashida-space&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-epub-text-orientation&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;text-overflow&quot;,&quot;webkit&quot;:&quot;text-overflow&quot;,&quot;presto&quot;:&quot;text-overflow&quot;,&quot;trident&quot;:&quot;-ms-text-overflow&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-text-security&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-text-size-adjust&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-text-stroke&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-text-stroke-color&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-text-stroke-width&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;text-transform&quot;,&quot;webkit&quot;:&quot;-epub-text-transform&quot;,&quot;presto&quot;:&quot;text-transform&quot;,&quot;trident&quot;:&quot;text-transform&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-text-underline-position&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-text-underline-position&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-touch-action&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-touch-callout&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-transform&quot;,&quot;webkit&quot;:&quot;-webkit-transform&quot;,&quot;presto&quot;:&quot;-o-transform&quot;,&quot;trident&quot;:&quot;transform&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;transform-origin&quot;,&quot;webkit&quot;:&quot;-webkit-transform-origin&quot;,&quot;presto&quot;:&quot;-o-transform-origin&quot;,&quot;trident&quot;:&quot;transform-origin&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-transform-origin-x&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-transform-origin-y&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-transform-origin-z&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;transform-style&quot;,&quot;webkit&quot;:&quot;-webkit-transform-style&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;transform-style&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;transition&quot;,&quot;webkit&quot;:&quot;-webkit-transition&quot;,&quot;presto&quot;:&quot;-o-transition&quot;,&quot;trident&quot;:&quot;transition&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;transition-delay&quot;,&quot;webkit&quot;:&quot;-webkit-transition-delay&quot;,&quot;presto&quot;:&quot;-o-transition-delay&quot;,&quot;trident&quot;:&quot;transition-delay&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;transition-duration&quot;,&quot;webkit&quot;:&quot;-webkit-transition-duration&quot;,&quot;presto&quot;:&quot;-o-transition-duration&quot;,&quot;trident&quot;:&quot;transition-duration&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;transition-property&quot;,&quot;webkit&quot;:&quot;-webkit-transition-property&quot;,&quot;presto&quot;:&quot;-o-transition-property&quot;,&quot;trident&quot;:&quot;transition-property&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;transition-timing-function&quot;,&quot;webkit&quot;:&quot;-webkit-transition-timing-function&quot;,&quot;presto&quot;:&quot;-o-transition-timing-function&quot;,&quot;trident&quot;:&quot;transition-timing-function&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-user-drag&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-user-focus&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-user-input&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-user-modify&quot;,&quot;webkit&quot;:&quot;-webkit-user-modify&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;-moz-user-select&quot;,&quot;webkit&quot;:&quot;-webkit-user-select&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-user-select&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-xv-voice-balance&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-xv-voice-duration&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-xv-voice-pitch&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-xv-voice-pitch-range&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-xv-voice-rate&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-xv-voice-stress&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;-xv-voice-volume&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;-moz-window-shadow&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;&quot;,&quot;status&quot;:&quot;P&quot;},
{&quot;gecko&quot;:&quot;word-break&quot;,&quot;webkit&quot;:&quot;-epub-word-break&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-word-break&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;word-wrap&quot;,&quot;webkit&quot;:&quot;word-wrap&quot;,&quot;presto&quot;:&quot;word-wrap&quot;,&quot;trident&quot;:&quot;-ms-word-wrap&quot;,&quot;status&quot;:&quot;WD&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-wrap-flow&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-wrap-flow&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-wrap-margin&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;-webkit-wrap-through&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-wrap-through&quot;,&quot;status&quot;:&quot;&quot;},
{&quot;gecko&quot;:&quot;writing-mode&quot;,&quot;webkit&quot;:&quot;-epub-writing-mode&quot;,&quot;presto&quot;:&quot;writing-mode&quot;,&quot;trident&quot;:&quot;-ms-writing-mode&quot;,&quot;status&quot;:&quot;ED&quot;},
{&quot;gecko&quot;:&quot;&quot;,&quot;webkit&quot;:&quot;zoom&quot;,&quot;presto&quot;:&quot;&quot;,&quot;trident&quot;:&quot;-ms-zoom&quot;,&quot;status&quot;:&quot;&quot;}]};

var PrefixHelper = {

  mVENDOR_PREFIXES: null,

  kEXPORTS_FOR_GECKO:   true,
  kEXPORTS_FOR_WEBKIT:  true,
  kEXPORTS_FOR_PRESTO:  true,
  kEXPORTS_FOR_TRIDENT: true,

  cleanPrefixes: function()
  {
    this.mVENDOR_PREFIXES = null;
  },

  prefixesForProperty: function(aProperty)
  {
    if (!this.mVENDOR_PREFIXES) {

      this.mVENDOR_PREFIXES = {};
      for (var i = 0; i &lt; kCSS_VENDOR_PREFIXES.properties.length; i++) {
        var p = kCSS_VENDOR_PREFIXES.properties[i];
        if (p.gecko &amp;&amp; (p.webkit || p.presto || p.trident)) {
          var o = {};
          if (this.kEXPORTS_FOR_GECKO) o[p.gecko] = true;
          if (this.kEXPORTS_FOR_WEBKIT &amp;&amp; p.webkit)  o[p.webkit] = true;
          if (this.kEXPORTS_FOR_PRESTO &amp;&amp; p.presto)  o[p.presto] = true;
          if (this.kEXPORTS_FOR_TRIDENT &amp;&amp; p.trident) o[p.trident] = true;
          this.mVENDOR_PREFIXES[p.gecko] = [];
          for (var j in o)
            this.mVENDOR_PREFIXES[p.gecko].push(j)
        }
      }
    }
    if (aProperty in this.mVENDOR_PREFIXES)
      return this.mVENDOR_PREFIXES[aProperty].sort();
    return null;
  }
};

function ParseURL(buffer) {
  var result = { };
  result.protocol = &quot;&quot;;
  result.user = &quot;&quot;;
  result.password = &quot;&quot;;
  result.host = &quot;&quot;;
  result.port = &quot;&quot;;
  result.path = &quot;&quot;;
  result.query = &quot;&quot;;

  var section = &quot;PROTOCOL&quot;;
  var start = 0;
  var wasSlash = false;

  while(start &lt; buffer.length) {
    if(section == &quot;PROTOCOL&quot;) {
      if(buffer.charAt(start) == &#x27;:&#x27;) {
        section = &quot;AFTER_PROTOCOL&quot;;
        start++;
      } else if(buffer.charAt(start) == &#x27;/&#x27; &amp;&amp; result.protocol.length() == 0) { 
        section = PATH;
      } else {
        result.protocol += buffer.charAt(start++);
      }
    } else if(section == &quot;AFTER_PROTOCOL&quot;) {
      if(buffer.charAt(start) == &#x27;/&#x27;) {
    if(!wasSlash) {
          wasSlash = true;
    } else {
          wasSlash = false;
          section = &quot;USER&quot;;
    }
        start ++;
      } else {
        throw new ParseException(&quot;Protocol shell be separated with 2 slashes&quot;);
      }       
    } else if(section == &quot;USER&quot;) {
      if(buffer.charAt(start) == &#x27;/&#x27;) {
        result.host = result.user;
        result.user = &quot;&quot;;
        section = &quot;PATH&quot;;
      } else if(buffer.charAt(start) == &#x27;?&#x27;) {
        result.host = result.user;
        result.user = &quot;&quot;;
        section = &quot;QUERY&quot;;
        start++;
      } else if(buffer.charAt(start) == &#x27;:&#x27;) {
        section = &quot;PASSWORD&quot;;
        start++;
      } else if(buffer.charAt(start) == &#x27;@&#x27;) {
        section = &quot;HOST&quot;;
        start++;
      } else {
        result.user += buffer.charAt(start++);
      }
    } else if(section == &quot;PASSWORD&quot;) {
      if(buffer.charAt(start) == &#x27;/&#x27;) {
        result.host = result.user;
        result.port = result.password;
        result.user = &quot;&quot;;
        result.password = &quot;&quot;;
        section = &quot;PATH&quot;;
      } else if(buffer.charAt(start) == &#x27;?&#x27;) {
        result.host = result.user;
        result.port = result.password;
        result.user = &quot;&quot;;
        result.password = &quot;&quot;;
        section = &quot;QUERY&quot;;
        start ++;
      } else if(buffer.charAt(start) == &#x27;@&#x27;) {
        section = &quot;HOST&quot;;
        start++;
      } else {
        result.password += buffer.charAt(start++);
      }
    } else if(section == &quot;HOST&quot;) {
      if(buffer.charAt(start) == &#x27;/&#x27;) {
        section = &quot;PATH&quot;;
      } else if(buffer.charAt(start) == &#x27;:&#x27;) {
        section = &quot;PORT&quot;;
        start++;
      } else if(buffer.charAt(start) == &#x27;?&#x27;) {
        section = &quot;QUERY&quot;;
        start++;
      } else {
        result.host += buffer.charAt(start++);
      }
    } else if(section == &quot;PORT&quot;) {
      if(buffer.charAt(start) == &#x27;/&#x27;) {
        section = &quot;PATH&quot;;
      } else if(buffer.charAt(start) == &#x27;?&#x27;) {
        section = &quot;QUERY&quot;;
        start++;
      } else {
        result.port += buffer.charAt(start++);
      }
    } else if(section == &quot;PATH&quot;) {
      if(buffer.charAt(start) == &#x27;?&#x27;) {
    section = &quot;QUERY&quot;;
    start ++;
      } else {
    result.path += buffer.charAt(start++);
      }
    } else if(section == &quot;QUERY&quot;) {
      result.query += buffer.charAt(start++);
    }
  }

  if(section == &quot;PROTOCOL&quot;) {
    result.host = result.protocol;
    result.protocol = &quot;http&quot;;
  } else if(section == &quot;AFTER_PROTOCOL&quot;) {
    throw new ParseException(&quot;Invalid url&quot;);
  } else if(section == &quot;USER&quot;) {
    result.host = result.user;
    result.user = &quot;&quot;;
  } else if(section == &quot;PASSWORD&quot;) {
    result.host = result.user;
    result.port = result.password;
    result.user = &quot;&quot;;
    result.password = &quot;&quot;;
  }

  return result;
}

function ParseException(description) {
    this.description = description;
}

function CountLF(s)
{
  var nCR = s.match( /\n/g );
  return nCR ? nCR.length + 1 : 1;
}

function DisposablePartialParsing(aStringToParse, aMethodName)
{
  var parser = new CSSParser();
  parser._init();
  parser.mPreserveWS       = false;
  parser.mPreserveComments = false;
  parser.mPreservedTokens = [];
  parser.mScanner.init(aStringToParse);

  return parser[aMethodName]();    
}

function FilterLinearGradient(aValue, aEngine)
{
  var d = DisposablePartialParsing(aValue, &quot;parseBackgroundImages&quot;);
  if (!d)
    return null;
  var g = d[0];
  if (!g.value)
    return null;

  var str = &quot;&quot;;
  var position = (&quot;position&quot; in g.value) ? g.value.position.toLowerCase() : &quot;&quot;;
  var angle    = (&quot;angle&quot; in g.value) ? g.value.angle.toLowerCase() : &quot;&quot;;

  if (&quot;webkit20110101&quot; == aEngine) {
    var cancelled = false;
    str = &quot;-webkit-gradient(linear, &quot;;
    // normalize angle
    if (angle) {
      var match = angle.match(/^([0-9\-\.\\+]+)([a-z]*)/);
      var angle = parseFloat(match[1]);
      var unit  = match[2];
      switch (unit) {
        case &quot;grad&quot;: angle = angle * 90 / 100; break;
        case &quot;rad&quot;:  angle = angle * 180 / Math.PI; break;
        default: break;
      }
      while (angle &lt; 0)
        angle += 360;
      while (angle &gt;= 360)
        angle -= 360;
    }
    // get startpoint w/o keywords
    var startpoint = [];
    var endpoint = [];
    if (position != &quot;&quot;) {
      if (position == &quot;center&quot;)
        position = &quot;center center&quot;;
      startpoint = position.split(&quot; &quot;);
      if (angle == &quot;&quot; &amp;&amp; angle != 0) {
        // no angle, then we just turn the point 180 degrees around center
        switch (startpoint[0]) {
          case &quot;left&quot;:   endpoint.push(&quot;right&quot;); break;
          case &quot;center&quot;: endpoint.push(&quot;center&quot;); break;
          case &quot;right&quot;:  endpoint.push(&quot;left&quot;); break;
          default: {
              var match = startpoint[0].match(/^([0-9\-\.\\+]+)([a-z]*)/);
              var v     = parseFloat(match[0]);
              var unit  = match[1];
              if (unit == &quot;%&quot;) {
                endpoint.push((100-v) + &quot;%&quot;);
              }
              else
                cancelled = true;
            }
            break;
        }
        if (!cancelled)
          switch (startpoint[1]) {
            case &quot;top&quot;:    endpoint.push(&quot;bottom&quot;); break;
            case &quot;center&quot;: endpoint.push(&quot;center&quot;); break;
            case &quot;bottom&quot;: endpoint.push(&quot;top&quot;); break;
            default: {
                var match = startpoint[1].match(/^([0-9\-\.\\+]+)([a-z]*)/);
                var v     = parseFloat(match[0]);
                var unit  = match[1];
                if (unit == &quot;%&quot;) {
                  endpoint.push((100-v) + &quot;%&quot;);
                }
                else
                  cancelled = true;
              }
              break;
          }
      }
      else {
        switch (angle) {
          case 0:    endpoint.push(&quot;right&quot;); endpoint.push(startpoint[1]); break;
          case 90:   endpoint.push(startpoint[0]); endpoint.push(&quot;top&quot;); break;
          case 180:  endpoint.push(&quot;left&quot;); endpoint.push(startpoint[1]); break;
          case 270:  endpoint.push(startpoint[0]); endpoint.push(&quot;bottom&quot;); break;
          default:     cancelled = true; break;
        }
      }
    }
    else {
      // no position defined, we accept only vertical and horizontal
      if (angle == &quot;&quot;)
        angle = 270;
      switch (angle) {
        case 0:    startpoint= [&quot;left&quot;, &quot;center&quot;];   endpoint = [&quot;right&quot;, &quot;center&quot;]; break;
        case 90:   startpoint= [&quot;center&quot;, &quot;bottom&quot;]; endpoint = [&quot;center&quot;, &quot;top&quot;]; break;
        case 180:  startpoint= [&quot;right&quot;, &quot;center&quot;];  endpoint = [&quot;left&quot;, &quot;center&quot;]; break;
        case 270:  startpoint= [&quot;center&quot;, &quot;top&quot;];    endpoint = [&quot;center&quot;, &quot;bottom&quot;]; break;
        default:     cancelled = true; break;
      }
    }
  
    if (cancelled)
      return &quot;&quot;;
  
    str += startpoint.join(&quot; &quot;) + &quot;, &quot; + endpoint.join(&quot; &quot;);
    if (!g.value.stops[0].position)
      g.value.stops[0].position = &quot;0%&quot;;
    if (!g.value.stops[g.value.stops.length-1].position)
      g.value.stops[g.value.stops.length-1].position = &quot;100%&quot;;
    var current = 0;
    for (var i = 0; i &lt; g.value.stops.length &amp;&amp; !cancelled; i++) {
      var s = g.value.stops[i];
      if (s.position) {
        if (s.position.indexOf(&quot;%&quot;) == -1) {
          cancelled = true;
          break;
        }
      }
      else {
        var j = i + 1;
        while (j &lt; g.value.stops.length &amp;&amp; !g.value.stops[j].position)
          j++;
        var inc = parseFloat(g.value.stops[j].position) - current;
        for (var k = i; k &lt; j; k++) {
          g.value.stops[k].position = (current + inc * (k - i + 1) / (j - i + 1)) + &quot;%&quot;;
        }
      }
      current = parseFloat(s.position);
      str += &quot;, color-stop(&quot; + (parseFloat(current) / 100) + &quot;, &quot; + s.color + &quot;)&quot;;
    }
  
    if (cancelled)
      return &quot;&quot;;
  }
  else {
    str = (g.value.isRepeating ? &quot;repeating-&quot; : &quot;&quot;) + &quot;linear-gradient(&quot;;
    if (angle || position)
      str += (angle ? angle : position) + &quot;, &quot;;
  
    for (var i = 0; i &lt; g.value.stops.length; i++) {
      var s = g.value.stops[i];
      str += s.color
             + (s.position ? &quot; &quot; + s.position : &quot;&quot;)
             + ((i != g.value.stops.length -1) ? &quot;, &quot; : &quot;&quot;);
    }
  }
  str += &quot;)&quot;;

  switch (aEngine) {
    case &quot;webkit&quot;:     str = &quot;-webkit-&quot;  + str; break;
    case &quot;gecko1.9.2&quot;: str = &quot;-moz-&quot;  + str; break;
    case &quot;presto&quot;:     str = &quot;-o-&quot;  + str; break;
    case &quot;trident&quot;:    str = &quot;-ms-&quot;  + str; break;
    default:           break;
  }
  return str;
}

function FilterRadialGradient(aValue, aEngine)
{
  var d = DisposablePartialParsing(aValue, &quot;parseBackgroundImages&quot;);
  if (!d)
    return null;
  var g = d[0];
  if (!g.value)
    return null;

  // oh come on, this is now so painful to deal with ; no way I&#x27;m going to implement this
  if (&quot;webkit20110101&quot; == aEngine)
    return null;
  
  var str = (g.value.isRepeating ? &quot;repeating-&quot; : &quot;&quot;) + &quot;radial-gradient(&quot;;
  var shape = (&quot;shape&quot; in g.value) ? g.value.shape : &quot;&quot;;
  var extent  = (&quot;extent&quot;  in g.value) ? g.value.extent : &quot;&quot;;
  var lengths = &quot;&quot;;
  switch (g.value.positions.length) {
    case 1:
      lengths = g.value.positions[0] + &quot; &quot; + g.value.positions[0];
      break;
    case 2:
      lengths = g.value.positions[0] + &quot; &quot; + g.value.positions[1];
      break;
    default:
      break;
  }
  var at = g.value.at;

  str += (at ? at + &quot;, &quot; : &quot;&quot;)
         + ((shape || extent || at)
            ? (shape ? shape + &quot; &quot; : &quot;&quot;)
              + (extent ? extent + &quot; &quot; : &quot;&quot;)
              + (lengths ? lengths + &quot; &quot; : &quot;&quot;)
              + &quot;, &quot;
            : &quot;&quot;);
  for (var i = 0; i &lt; g.value.stops.length; i++) {
    var s = g.value.stops[i];
    str += s.color
           + (s.position ? &quot; &quot; + s.position : &quot;&quot;)
           + ((i != g.value.stops.length -1) ? &quot;, &quot; : &quot;&quot;);
  }
  str += &quot;)&quot;;

  switch (aEngine) {
    case &quot;webkit&quot;:     str = &quot;-webkit-&quot;  + str; break;
    case &quot;gecko1.9.2&quot;: str = &quot;-moz-&quot;  + str; break;
    case &quot;presto&quot;:     str = &quot;-o-&quot;  + str; break;
    case &quot;trident&quot;:    str = &quot;-ms-&quot;  + str; break;
    default:           break;
  }
  return str;
}

var CSS_ESCAPE  = &#x27;\\&#x27;;

var IS_HEX_DIGIT  = 1;
var START_IDENT   = 2;
var IS_IDENT      = 4;
var IS_WHITESPACE = 8;

var W   = IS_WHITESPACE;
var I   = IS_IDENT;
var S   =          START_IDENT;
var SI  = IS_IDENT|START_IDENT;
var XI  = IS_IDENT            |IS_HEX_DIGIT;
var XSI = IS_IDENT|START_IDENT|IS_HEX_DIGIT;

function CSSScanner(aString)
{
  this.init(aString);
}

CSSScanner.prototype = {

  kLexTable: [
  //                                     TAB LF      FF  CR
     0,  0,  0,  0,  0,  0,  0,  0,  0,  W,  W,  0,  W,  W,  0,  0,
  //
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  // SPC !   &quot;   #   $   %   &amp;   &#x27;   (   )   *   +   ,   -   .   /
     W,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  I,  0,  0,
  // 0   1   2   3   4   5   6   7   8   9   :   ;   &lt;   =   &gt;   ?
     XI, XI, XI, XI, XI, XI, XI, XI, XI, XI, 0,  0,  0,  0,  0,  0,
  // @   A   B   C   D   E   F   G   H   I   J   K   L   M   N   O
     0,  XSI,XSI,XSI,XSI,XSI,XSI,SI, SI, SI, SI, SI, SI, SI, SI, SI,
  // P   Q   R   S   T   U   V   W   X   Y   Z   [   \   ]   ^   _
     SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, 0,  S,  0,  0,  SI,
  // &#x60;   a   b   c   d   e   f   g   h   i   j   k   l   m   n   o
     0,  XSI,XSI,XSI,XSI,XSI,XSI,SI, SI, SI, SI, SI, SI, SI, SI, SI,
  // p   q   r   s   t   u   v   w   x   y   z   {   |   }   ~
     SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, 0,  0,  0,  0,  0,
  //
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  //
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
  //                                               
     0,  SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI,
  //                                              
     SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI,
  //                                              
     SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI,
  //                                              
     SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI,
  //                                               
     SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI,
  //                                              
     SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI, SI
  ],

  kHexValues: {
    &quot;0&quot;: 0, &quot;1&quot;: 1, &quot;2&quot;: 2, &quot;3&quot;: 3, &quot;4&quot;: 4, &quot;5&quot;: 5, &quot;6&quot;: 6, &quot;7&quot;: 7, &quot;8&quot;: 8, &quot;9&quot;: 9,
    &quot;a&quot;: 10, &quot;b&quot;: 11, &quot;c&quot;: 12, &quot;d&quot;: 13, &quot;e&quot;: 14, &quot;f&quot;: 15
  },

  mString : &quot;&quot;,
  mPos : 0,
  mPreservedPos : [],

  init: function(aString) {
    this.mString = aString;
    this.mPos = 0;
    this.mPreservedPos = [];
  },

  getCurrentPos: function() {
    return this.mPos;
  },

  getAlreadyScanned: function()
  {
    return this.mString.substr(0, this.mPos);
  },

  preserveState: function() {
    this.mPreservedPos.push(this.mPos);
  },

  restoreState: function() {
    if (this.mPreservedPos.length) {
      this.mPos = this.mPreservedPos.pop();
    }
  },

  forgetState: function() {
    if (this.mPreservedPos.length) {
      this.mPreservedPos.pop();
    }
  },

  read: function() {
    if (this.mPos &lt; this.mString.length)
      return this.mString.charAt(this.mPos++);
    return -1;
  },

  peek: function() {
    if (this.mPos &lt; this.mString.length)
      return this.mString.charAt(this.mPos);
    return -1;
  },

  isHexDigit: function(c) {
    var code = c.charCodeAt(0);
    return (code &lt; 256 &amp;&amp; (this.kLexTable[code] &amp; IS_HEX_DIGIT) != 0);
  },

  isIdentStart: function(c) {
    var code = c.charCodeAt(0);
    return (code &gt;= 256 || (this.kLexTable[code] &amp; START_IDENT) != 0);
  },

  startsWithIdent: function(aFirstChar, aSecondChar) {
    var code = aFirstChar.charCodeAt(0);
    return this.isIdentStart(aFirstChar) ||
           (aFirstChar == &quot;-&quot; &amp;&amp; this.isIdentStart(aSecondChar));
  },

  isIdent: function(c) {
    var code = c.charCodeAt(0);
    return (code &gt;= 256 || (this.kLexTable[code] &amp; IS_IDENT) != 0);
  },

  pushback: function() {
    this.mPos--;
  },

  nextHexValue: function() {
    var c = this.read();
    if (c == -1 || !this.isHexDigit(c))
      return new jscsspToken(jscsspToken.NULL_TYPE, null);
    var s = c;
    c = this.read();
    while (c != -1 &amp;&amp; this.isHexDigit(c)) {
      s += c;
      c = this.read();
    }
    if (c != -1)
      this.pushback();
    return new jscsspToken(jscsspToken.HEX_TYPE, s);
  },

  gatherEscape: function() {
    var c = this.peek();
    if (c == -1)
      return &quot;&quot;;
    if (this.isHexDigit(c)) {
      var code = 0;
      for (var i = 0; i &lt; 6; i++) {
        c = this.read();
        if (this.isHexDigit(c))
          code = code * 16 + this.kHexValues[c.toLowerCase()];
        else if (!this.isHexDigit(c) &amp;&amp; !this.isWhiteSpace(c)) {
          this.pushback();
          break;
        }
        else
          break;
      }
      if (i == 6) {
        c = this.peek();
        if (this.isWhiteSpace(c))
          this.read();
      }
      return String.fromCharCode(code);
    }
    c = this.read();
    if (c != &quot;\n&quot;)
      return c;
    return &quot;&quot;;
  },

  gatherIdent: function(c) {
    var s = &quot;&quot;;
    if (c == CSS_ESCAPE)
      s += this.gatherEscape();
    else
      s += c;
    c = this.read();
    while (c != -1
           &amp;&amp; (this.isIdent(c) || c == CSS_ESCAPE)) {
      if (c == CSS_ESCAPE)
        s += this.gatherEscape();
      else
        s += c;
      c = this.read();
    }
    if (c != -1)
      this.pushback();
    return s;
  },

  parseIdent: function(c) {
    var value = this.gatherIdent(c);
    var nextChar = this.peek();
    if (nextChar == &quot;(&quot;) {
      value += this.read();
      return new jscsspToken(jscsspToken.FUNCTION_TYPE, value);
    }
    return new jscsspToken(jscsspToken.IDENT_TYPE, value);
  },

  isDigit: function(c) {
    return (c &gt;= &#x27;0&#x27;) &amp;&amp; (c &lt;= &#x27;9&#x27;);
  },

  parseComment: function(c) {
    var s = c;
    while ((c = this.read()) != -1) {
      s += c;
      if (c == &quot;*&quot;) {
        c = this.read();
        if (c == -1)
          break;
        if (c == &quot;/&quot;) {
          s += c;
          break;
        }
        this.pushback();
      }
    }
    return new jscsspToken(jscsspToken.COMMENT_TYPE, s);
  },

  parseNumber: function(c) {
    var s = c;
    var foundDot = false;
    while ((c = this.read()) != -1) {
      if (c == &quot;.&quot;) {
        if (foundDot)
          break;
        else {
          s += c;
          foundDot = true;
        }
      } else if (this.isDigit(c))
        s += c;
      else
        break;
    }

    if (c != -1 &amp;&amp; this.startsWithIdent(c, this.peek())) { // DIMENSION
      var unit = this.gatherIdent(c);
      s += unit;
      return new jscsspToken(jscsspToken.DIMENSION_TYPE, s, unit);
    }
    else if (c == &quot;%&quot;) {
      s += &quot;%&quot;;
      return new jscsspToken(jscsspToken.PERCENTAGE_TYPE, s);
    }
    else if (c != -1)
      this.pushback();
    return new jscsspToken(jscsspToken.NUMBER_TYPE, s);
  },

  parseString: function(aStop) {
    var s = aStop;
    var previousChar = aStop;
    var c;
    while ((c = this.read()) != -1) {
      if (c == aStop &amp;&amp; previousChar != CSS_ESCAPE) {
        s += c;
        break;
      }
      else if (c == CSS_ESCAPE) {
        c = this.peek();
        if (c == -1)
          break;
        else if (c == &quot;\n&quot; || c == &quot;\r&quot; || c == &quot;\f&quot;) {
          d = c;
          c = this.read();
          // special for Opera that preserves \r\n...
          if (d == &quot;\r&quot;) {
            c = this.peek();
            if (c == &quot;\n&quot;)
              c = this.read();
          }
        }
        else {
          s += this.gatherEscape();
          c = this.peek();
        }
      }
      else if (c == &quot;\n&quot; || c == &quot;\r&quot; || c == &quot;\f&quot;) {
        break;
      }
      else
        s += c;

      previousChar = c;
    }
    return new jscsspToken(jscsspToken.STRING_TYPE, s);
  },

  isWhiteSpace: function(c) {
    var code = c.charCodeAt(0);
    return code &lt; 256 &amp;&amp; (this.kLexTable[code] &amp; IS_WHITESPACE) != 0;
  },

  eatWhiteSpace: function(c) {
    var s = c;
    while ((c = this.read()) != -1) {
      if (!this.isWhiteSpace(c))
        break;
      s += c;
    }
    if (c != -1)
      this.pushback();
    return s;
  },

  parseAtKeyword: function(c) {
    return new jscsspToken(jscsspToken.ATRULE_TYPE, this.gatherIdent(c));
  },

  nextToken: function() {
    var c = this.read();
    if (c == -1)
      return new jscsspToken(jscsspToken.NULL_TYPE, null);

    if (this.startsWithIdent(c, this.peek()))
      return this.parseIdent(c);

    if (c == &#x27;@&#x27;) {
      var nextChar = this.read();
      if (nextChar != -1) {
        var followingChar = this.peek();
        this.pushback();
        if (this.startsWithIdent(nextChar, followingChar))
          return this.parseAtKeyword(c);
      }
    }

    if (c == &quot;.&quot; || c == &quot;+&quot; || c == &quot;-&quot;) {
      var nextChar = this.peek();
      if (this.isDigit(nextChar))
        return this.parseNumber(c);
      else if (nextChar == &quot;.&quot; &amp;&amp; c != &quot;.&quot;) {
        firstChar = this.read();
        var secondChar = this.peek();
        this.pushback();
        if (this.isDigit(secondChar))
          return this.parseNumber(c);
      }
    }
    if (this.isDigit(c)) {
      return this.parseNumber(c);
    }

    if (c == &quot;&#x27;&quot; || c == &#x27;&quot;&#x27;)
      return this.parseString(c);

    if (this.isWhiteSpace(c)) {
      var s = this.eatWhiteSpace(c);
      
      return new jscsspToken(jscsspToken.WHITESPACE_TYPE, s);
    }

    if (c == &quot;|&quot; || c == &quot;~&quot; || c == &quot;^&quot; || c == &quot;$&quot; || c == &quot;*&quot;) {
      var nextChar = this.read();
      if (nextChar == &quot;=&quot;) {
        switch (c) {
          case &quot;~&quot; :
            return new jscsspToken(jscsspToken.INCLUDES_TYPE, &quot;~=&quot;);
          case &quot;|&quot; :
            return new jscsspToken(jscsspToken.DASHMATCH_TYPE, &quot;|=&quot;);
          case &quot;^&quot; :
            return new jscsspToken(jscsspToken.BEGINSMATCH_TYPE, &quot;^=&quot;);
          case &quot;$&quot; :
            return new jscsspToken(jscsspToken.ENDSMATCH_TYPE, &quot;$=&quot;);
          case &quot;*&quot; :
            return new jscsspToken(jscsspToken.CONTAINSMATCH_TYPE, &quot;*=&quot;);
          default :
            break;
        }
      } else if (nextChar != -1)
        this.pushback();
    }

    if (c == &quot;/&quot; &amp;&amp; this.peek() == &quot;*&quot;)
      return this.parseComment(c);

    return new jscsspToken(jscsspToken.SYMBOL_TYPE, c);
  }
};

CSSParser.prototype.parseBackgroundImages = function()
{
  var backgrounds = [];
  var token = this.getToken(true, true);
  while (token.isNotNull()) {
    if (token.isFunction(&quot;url(&quot;)) {
      token = this.getToken(true, true);
      var urlContent = this.parseURL(token);
      backgrounds.push( { type: &quot;image&quot;, value: &quot;url(&quot; + urlContent });
      token = this.getToken(true, true);
    }
    else if (token.isFunction(&quot;linear-gradient(&quot;)
             || token.isFunction(&quot;radial-gradient(&quot;)
             || token.isFunction(&quot;repeating-linear-gradient(&quot;)
             || token.isFunction(&quot;repeating-radial-gradient(&quot;)) {
      this.ungetToken();
      var gradient = this.parseGradient();
      if (gradient) {
        backgrounds.push({
                         type: gradient.isRadial ? &quot;radial-gradient&quot; : &quot;linear-gradient&quot;,
                         value: gradient
                         });
        token = this.getToken(true, true);
      }
      else
        return null;
    }
    else if (token.isIdent(&quot;none&quot;)
             || token.isIdent(&quot;inherit&quot;)
             || token.isIdent(&quot;initial&quot;)) {
      backgrounds.push( { type: token.value });
      token = this.getToken(true, true);
    }
    else
      return null;
    
    if (token.isSymbol(&quot;,&quot;)) {
      token = this.getToken(true, true);
      if (!token.isNotNull())
        return null;
    }
  }
  return backgrounds;
};

CSSParser.prototype.parseBackgroundShorthand = function(token, aDecl, aAcceptPriority)
{
  var kHPos = {
    &quot;left&quot; : true,
    &quot;right&quot; : true
  };
  var kVPos = {
    &quot;top&quot; : true,
    &quot;bottom&quot; : true
  };
  var kPos = {
    &quot;left&quot; : true,
    &quot;right&quot; : true,
    &quot;top&quot; : true,
    &quot;bottom&quot; : true,
    &quot;center&quot; : true
  };
  
  var bgColor = null;
  var bgRepeat = null;
  var bgAttachment = null;
  var bgImage = null;
  var bgPosition = null;
  
  while (true) {
    
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!bgColor
             &amp;&amp; !bgRepeat
             &amp;&amp; !bgAttachment
             &amp;&amp; !bgImage
             &amp;&amp; !bgPosition
             &amp;&amp; token.isIdent(this.kINHERIT)) {
      bgColor = this.kINHERIT;
      bgRepeat = this.kINHERIT;
      bgAttachment = this.kINHERIT;
      bgImage = this.kINHERIT;
      bgPosition = this.kINHERIT;
    }
    
    else {
      if (!bgAttachment
          &amp;&amp; (token.isIdent(&quot;scroll&quot;) || token.isIdent(&quot;fixed&quot;))) {
        bgAttachment = token.value;
      }
      
      else if (!bgPosition
               &amp;&amp; ((token.isIdent() &amp;&amp; token.value in kPos)
                   || token.isDimension()
                   || token.isNumber(&quot;0&quot;)
                   || token.isPercentage())) {
                 bgPosition = token.value;
                 token = this.getToken(true, true);
                 if (token.isDimension()
                     || token.isNumber(&quot;0&quot;)
                     || token.isPercentage()) {
                   bgPosition += &quot; &quot; + token.value;
                 } else if (token.isIdent() &amp;&amp; token.value in kPos) {
                   if ((bgPosition in kHPos &amp;&amp; token.value in kHPos)
                       || (bgPosition in kVPos &amp;&amp; token.value in kVPos))
                     return &quot;&quot;;
                   bgPosition += &quot; &quot; + token.value;
                 } else {
                   this.ungetToken();
                   bgPosition += &quot; center&quot;;
                 }
               }
      
      else if (!bgRepeat
               &amp;&amp; (token.isIdent(&quot;repeat&quot;)
                   || token.isIdent(&quot;repeat-x&quot;)
                   || token.isIdent(&quot;repeat-y&quot;)
                   || token.isIdent(&quot;no-repeat&quot;))) {
                 bgRepeat = token.value;
               }
      
      else if (!bgImage
               &amp;&amp; (token.isFunction(&quot;url(&quot;) || token.isIdent(&quot;none&quot;))) {
        bgImage = token.value;
        if (token.isFunction(&quot;url(&quot;)) {
          token = this.getToken(true, true);
          var url = this.parseURL(token); // TODO
          if (url)
            bgImage += url;
          else
            return &quot;&quot;;
        }
      }
      
      else if (!bgImage
               &amp;&amp; (token.isFunction(&quot;linear-gradient(&quot;)
                   || token.isFunction(&quot;radial-gradient(&quot;)
                   || token.isFunction(&quot;repeating-linear-gradient(&quot;) || token.isFunction(&quot;repeating-radial-gradient(&quot;))) {
                 this.ungetToken();
                 var gradient = this.parseGradient();
                 if (gradient)
                   bgImage = this.serializeGradient(gradient);
                 else
                   return &quot;&quot;;
               }
      
      else {
        var color = this.parseColor(token);
        if (!bgColor &amp;&amp; color)
          bgColor = color;
        else
          return &quot;&quot;;
      }
      
    }
    
    token = this.getToken(true, true);
  }
  
  // create the declarations
  this.forgetState();
  bgColor = bgColor ? bgColor : &quot;transparent&quot;;
  bgImage = bgImage ? bgImage : &quot;none&quot;;
  bgRepeat = bgRepeat ? bgRepeat : &quot;repeat&quot;;
  bgAttachment = bgAttachment ? bgAttachment : &quot;scroll&quot;;
  bgPosition = bgPosition ? bgPosition : &quot;top left&quot;;
  
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;background-color&quot;, bgColor));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;background-image&quot;, bgImage));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;background-repeat&quot;, bgRepeat));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;background-attachment&quot;, bgAttachment));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;background-position&quot;, bgPosition));
  
  return bgColor + &quot; &quot; + bgImage + &quot; &quot; + bgRepeat + &quot; &quot; + bgAttachment + &quot; &quot; + bgPosition;
};
CSSParser.prototype.parseBorderColorShorthand = function(token, aDecl, aAcceptPriority)
{
  var top = null;
  var bottom = null;
  var left = null;
  var right = null;
  
  var values = [];
  while (true) {
    
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!values.length &amp;&amp; token.isIdent(this.kINHERIT)) {
      values.push(token.value);
      token = this.getToken(true, true);
      break;
    }
    
    else {
      var color = this.parseColor(token);
      if (color)
        values.push(color);
      else
        return &quot;&quot;;
    }
    
    token = this.getToken(true, true);
  }
  
  var count = values.length;
  switch (count) {
    case 1:
      top = values[0];
      bottom = top;
      left = top;
      right = top;
      break;
    case 2:
      top = values[0];
      bottom = top;
      left = values[1];
      right = left;
      break;
    case 3:
      top = values[0];
      left = values[1];
      right = left;
      bottom = values[2];
      break;
    case 4:
      top = values[0];
      right = values[1];
      bottom = values[2];
      left = values[3];
      break;
    default:
      return &quot;&quot;;
  }
  this.forgetState();
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-top-color&quot;, top));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-right-color&quot;, right));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-bottom-color&quot;, bottom));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-left-color&quot;, left));
  return top + &quot; &quot; + right + &quot; &quot; + bottom + &quot; &quot; + left;
};

CSSParser.prototype.parseBorderEdgeOrOutlineShorthand = function(token, aDecl, aAcceptPriority, aProperty)
{
  var bWidth = null;
  var bStyle = null;
  var bColor = null;
  
  while (true) {
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!bWidth
             &amp;&amp; !bStyle
             &amp;&amp; !bColor
             &amp;&amp; token.isIdent(this.kINHERIT)) {
      bWidth = this.kINHERIT;
      bStyle = this.kINHERIT;
      bColor = this.kINHERIT;
    }
    
    else if (!bWidth &amp;&amp;
             (token.isDimension()
              || (token.isIdent() &amp;&amp; token.value in this.kBORDER_WIDTH_NAMES)
              || token.isNumber(&quot;0&quot;))) {
               bWidth = token.value;
             }
    
    else if (!bStyle &amp;&amp;
             (token.isIdent() &amp;&amp; token.value in this.kBORDER_STYLE_NAMES)) {
      bStyle = token.value;
    }
    
    else {
      var color = (aProperty == &quot;outline&quot; &amp;&amp; token.isIdent(&quot;invert&quot;))
      ? &quot;invert&quot; : this.parseColor(token);
      if (!bColor &amp;&amp; color)
        bColor = color;
      else
        return &quot;&quot;;
    }
    token = this.getToken(true, true);
  }
  
  // create the declarations
  this.forgetState();
  bWidth = bWidth ? bWidth : &quot;medium&quot;;
  bStyle = bStyle ? bStyle : &quot;none&quot;;
  bColor = bColor ? bColor : &quot;-moz-initial&quot;;
  
  function addPropertyToDecl(aSelf, aDecl, property, w, s, c) {
    aDecl.push(aSelf._createJscsspDeclarationFromValue(property + &quot;-width&quot;, w));
    aDecl.push(aSelf._createJscsspDeclarationFromValue(property + &quot;-style&quot;, s));
    aDecl.push(aSelf._createJscsspDeclarationFromValue(property + &quot;-color&quot;, c));
  }
  
  if (aProperty == &quot;border&quot;) {
    addPropertyToDecl(this, aDecl, &quot;border-top&quot;, bWidth, bStyle, bColor);
    addPropertyToDecl(this, aDecl, &quot;border-right&quot;, bWidth, bStyle, bColor);
    addPropertyToDecl(this, aDecl, &quot;border-bottom&quot;, bWidth, bStyle, bColor);
    addPropertyToDecl(this, aDecl, &quot;border-left&quot;, bWidth, bStyle, bColor);
  }
  else
    addPropertyToDecl(this, aDecl, aProperty, bWidth, bStyle, bColor);
  return bWidth + &quot; &quot; + bStyle + &quot; &quot; + bColor;
};

CSSParser.prototype.parseBorderImage = function()
{
  var borderImage = {url: &quot;&quot;, offsets: [], widths: [], sizes: []};
  var token = this.getToken(true, true);
  if (token.isFunction(&quot;url(&quot;)) {
    token = this.getToken(true, true);
    var urlContent = this.parseURL(token);
    if (urlContent) {
      borderImage.url = urlContent.substr(0, urlContent.length - 1).trim();
      if ((borderImage.url[0] == &#x27;&quot;&#x27; &amp;&amp; borderImage.url[borderImage.url.length - 1] == &#x27;&quot;&#x27;)
          || (borderImage.url[0] == &quot;&#x27;&quot; &amp;&amp; borderImage.url[borderImage.url.length - 1] == &quot;&#x27;&quot;))
        borderImage.url = borderImage.url.substr(1, borderImage.url.length - 2);
    }
    else
      return null;
  }
  else
    return null; 
  
  token = this.getToken(true, true);
  if (token.isNumber()
      || token.isPercentage())
    borderImage.offsets.push(token.value);
  else
    return null;
  var i;
  for (i= 0; i &lt; 3; i++) {
    token = this.getToken(true, true);
    if (token.isNumber()
        || token.isPercentage())
      borderImage.offsets.push(token.value);
    else
      break;
  }
  if (i == 3)
    token = this.getToken(true, true);
  
  if (token.isSymbol(&quot;/&quot;)) {
    token = this.getToken(true, true);
    if (token.isDimension()
        || token.isNumber(&quot;0&quot;)
        || (token.isIdent() &amp;&amp; token.value in this.kBORDER_WIDTH_NAMES))
      borderImage.widths.push(token.value);
    else
      return null;
    
    for (var i = 0; i &lt; 3; i++) {
      token = this.getToken(true, true);
      if (token.isDimension()
          || token.isNumber(&quot;0&quot;)
          || (token.isIdent() &amp;&amp; token.value in this.kBORDER_WIDTH_NAMES))
        borderImage.widths.push(token.value);
      else
        break;
    }
    if (i == 3)
      token = this.getToken(true, true);
  }
  
  for (var i = 0; i &lt; 2; i++) {
    if (token.isIdent(&quot;stretch&quot;)
        || token.isIdent(&quot;repeat&quot;)
        || token.isIdent(&quot;round&quot;))
      borderImage.sizes.push(token.value);
    else if (!token.isNotNull())
      return borderImage;
    else
      return null;
    token = this.getToken(true, true);
  }
  if (!token.isNotNull())
    return borderImage;
  
  return null;
};

CSSParser.prototype.parseBorderStyleShorthand = function(token, aDecl, aAcceptPriority)
{
  var top = null;
  var bottom = null;
  var left = null;
  var right = null;
  
  var values = [];
  while (true) {
    
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!values.length &amp;&amp; token.isIdent(this.kINHERIT)) {
      values.push(token.value);
    }
    
    else if (token.isIdent() &amp;&amp; token.value in this.kBORDER_STYLE_NAMES) {
      values.push(token.value);
    }
    else
      return &quot;&quot;;
    
    token = this.getToken(true, true);
  }
  
  var count = values.length;
  switch (count) {
    case 1:
      top = values[0];
      bottom = top;
      left = top;
      right = top;
      break;
    case 2:
      top = values[0];
      bottom = top;
      left = values[1];
      right = left;
      break;
    case 3:
      top = values[0];
      left = values[1];
      right = left;
      bottom = values[2];
      break;
    case 4:
      top = values[0];
      right = values[1];
      bottom = values[2];
      left = values[3];
      break;
    default:
      return &quot;&quot;;
  }
  this.forgetState();
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-top-style&quot;, top));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-right-style&quot;, right));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-bottom-style&quot;, bottom));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-left-style&quot;, left));
  return top + &quot; &quot; + right + &quot; &quot; + bottom + &quot; &quot; + left;
};

CSSParser.prototype.parseBorderWidthShorthand = function(token, aDecl, aAcceptPriority)
{
  var top = null;
  var bottom = null;
  var left = null;
  var right = null;
  
  var values = [];
  while (true) {
    
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!values.length &amp;&amp; token.isIdent(this.kINHERIT)) {
      values.push(token.value);
    }
    
    else if (token.isDimension()
             || token.isNumber(&quot;0&quot;)
             || (token.isIdent() &amp;&amp; token.value in this.kBORDER_WIDTH_NAMES)) {
      values.push(token.value);
    }
    else
      return &quot;&quot;;
    
    token = this.getToken(true, true);
  }
  
  var count = values.length;
  switch (count) {
    case 1:
      top = values[0];
      bottom = top;
      left = top;
      right = top;
      break;
    case 2:
      top = values[0];
      bottom = top;
      left = values[1];
      right = left;
      break;
    case 3:
      top = values[0];
      left = values[1];
      right = left;
      bottom = values[2];
      break;
    case 4:
      top = values[0];
      right = values[1];
      bottom = values[2];
      left = values[3];
      break;
    default:
      return &quot;&quot;;
  }
  this.forgetState();
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-top-width&quot;, top));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-right-width&quot;, right));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-bottom-width&quot;, bottom));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;border-left-width&quot;, left));
  return top + &quot; &quot; + right + &quot; &quot; + bottom + &quot; &quot; + left;
};

CSSParser.prototype.parseBoxShadows = function()
{
  var shadows = [];
  var token = this.getToken(true, true);
  var color = &quot;&quot;, blurRadius = &quot;0px&quot;, offsetX = &quot;0px&quot;, offsetY = &quot;0px&quot;, spreadRadius = &quot;0px&quot;;
  var inset = false;
  while (token.isNotNull()) {
    if (token.isIdent(&quot;none&quot;)) {
      shadows.push( { none: true } );
      token = this.getToken(true, true);
    }
    else {
      if (token.isIdent(&#x27;inset&#x27;)) {
        inset = true;
        token = this.getToken(true, true);
      }
      
      if (token.isPercentage() ||
          token.isDimensionOfUnit(&quot;cm&quot;) ||
          token.isDimensionOfUnit(&quot;mm&quot;) ||
          token.isDimensionOfUnit(&quot;in&quot;) ||
          token.isDimensionOfUnit(&quot;pc&quot;) ||
          token.isDimensionOfUnit(&quot;px&quot;) ||
          token.isDimensionOfUnit(&quot;em&quot;) ||
          token.isDimensionOfUnit(&quot;ex&quot;) ||
          token.isDimensionOfUnit(&quot;pt&quot;)) {
        var offsetX = token.value;
        token = this.getToken(true, true);
      }
      else
        return [];
      
      if (!inset &amp;&amp; token.isIdent(&#x27;inset&#x27;)) {
        inset = true;
        token = this.getToken(true, true);
      }
      
      if (token.isPercentage() ||
          token.isDimensionOfUnit(&quot;cm&quot;) ||
          token.isDimensionOfUnit(&quot;mm&quot;) ||
          token.isDimensionOfUnit(&quot;in&quot;) ||
          token.isDimensionOfUnit(&quot;pc&quot;) ||
          token.isDimensionOfUnit(&quot;px&quot;) ||
          token.isDimensionOfUnit(&quot;em&quot;) ||
          token.isDimensionOfUnit(&quot;ex&quot;) ||
          token.isDimensionOfUnit(&quot;pt&quot;)) {
        var offsetY = token.value;
        token = this.getToken(true, true);
      }
      else
        return [];
      
      if (!inset &amp;&amp; token.isIdent(&#x27;inset&#x27;)) {
        inset = true;
        token = this.getToken(true, true);
      }
      
      if (token.isPercentage() ||
          token.isDimensionOfUnit(&quot;cm&quot;) ||
          token.isDimensionOfUnit(&quot;mm&quot;) ||
          token.isDimensionOfUnit(&quot;in&quot;) ||
          token.isDimensionOfUnit(&quot;pc&quot;) ||
          token.isDimensionOfUnit(&quot;px&quot;) ||
          token.isDimensionOfUnit(&quot;em&quot;) ||
          token.isDimensionOfUnit(&quot;ex&quot;) ||
          token.isDimensionOfUnit(&quot;pt&quot;)) {
        var blurRadius = token.value;
        token = this.getToken(true, true);
      }
      
      if (!inset &amp;&amp; token.isIdent(&#x27;inset&#x27;)) {
        inset = true;
        token = this.getToken(true, true);
      }
      
      if (token.isPercentage() ||
          token.isDimensionOfUnit(&quot;cm&quot;) ||
          token.isDimensionOfUnit(&quot;mm&quot;) ||
          token.isDimensionOfUnit(&quot;in&quot;) ||
          token.isDimensionOfUnit(&quot;pc&quot;) ||
          token.isDimensionOfUnit(&quot;px&quot;) ||
          token.isDimensionOfUnit(&quot;em&quot;) ||
          token.isDimensionOfUnit(&quot;ex&quot;) ||
          token.isDimensionOfUnit(&quot;pt&quot;)) {
        var spreadRadius = token.value;
        token = this.getToken(true, true);
      }
      
      if (!inset &amp;&amp; token.isIdent(&#x27;inset&#x27;)) {
        inset = true;
        token = this.getToken(true, true);
      }
      
      if (token.isFunction(&quot;rgb(&quot;) ||
          token.isFunction(&quot;rgba(&quot;) ||
          token.isFunction(&quot;hsl(&quot;) ||
          token.isFunction(&quot;hsla(&quot;) ||
          token.isSymbol(&quot;#&quot;) ||
          token.isIdent()) {
        var color = this.parseColor(token);
        token = this.getToken(true, true);
      }
      
      if (!inset &amp;&amp; token.isIdent(&#x27;inset&#x27;)) {
        inset = true;
        token = this.getToken(true, true);
      }
      
      shadows.push( { none: false,
                   color: color,
                   offsetX: offsetX, offsetY: offsetY,
                   blurRadius: blurRadius,
                   spreadRadius: spreadRadius,
                   inset: inset
                   } );
      
      if (token.isSymbol(&quot;,&quot;)) {
        inset = false;
        color = &quot;&quot;;
        blurRadius = &quot;0px&quot;;
        spreadRadius = &quot;0px&quot;
        offsetX = &quot;0px&quot;;
        offsetY = &quot;0px&quot;; 
        token = this.getToken(true, true);
      }
      else if (!token.isNotNull())
        return shadows;
      else
        return [];
    }
  }
  return shadows;
};

CSSParser.prototype.parseCharsetRule = function(aSheet) {
  var token = this.getToken(false, false);
  if (token.isAtRule(&quot;@charset&quot;) &amp;&amp; token.value == &quot;@charset&quot;) { // lowercase check
    var s = token.value;
    token = this.getToken(false, false);
    s += token.value;
    if (token.isWhiteSpace(&quot; &quot;)) {
      token = this.getToken(false, false);
      s += token.value;
      if (token.isString()) {
        var encoding = token.value;
        token = this.getToken(false, false);
        s += token.value;
        if (token.isSymbol(&quot;;&quot;)) {
          var rule = new jscsspCharsetRule();
          rule.encoding = encoding;
          rule.parsedCssText = s;
          rule.parentStyleSheet = aSheet;
          aSheet.cssRules.push(rule);
          return true;
        }
        else
          this.reportError(kCHARSET_RULE_MISSING_SEMICOLON);
      }
      else
        this.reportError(kCHARSET_RULE_CHARSET_IS_STRING);
    }
    else
      this.reportError(kCHARSET_RULE_MISSING_WS);
  }
  
  this.addUnknownAtRule(aSheet, s);
  return false;
};

CSSParser.prototype.parseColor = function(token)
{
  var color = &quot;&quot;;
  if (token.isFunction(&quot;rgb(&quot;)
      || token.isFunction(&quot;rgba(&quot;)) {
    color = token.value;
    var isRgba = token.isFunction(&quot;rgba(&quot;)
    token = this.getToken(true, true);
    if (!token.isNumber() &amp;&amp; !token.isPercentage())
      return &quot;&quot;;
    color += token.value;
    token = this.getToken(true, true);
    if (!token.isSymbol(&quot;,&quot;))
      return &quot;&quot;;
    color += &quot;, &quot;;
    
    token = this.getToken(true, true);
    if (!token.isNumber() &amp;&amp; !token.isPercentage())
      return &quot;&quot;;
    color += token.value;
    token = this.getToken(true, true);
    if (!token.isSymbol(&quot;,&quot;))
      return &quot;&quot;;
    color += &quot;, &quot;;
    
    token = this.getToken(true, true);
    if (!token.isNumber() &amp;&amp; !token.isPercentage())
      return &quot;&quot;;
    color += token.value;
    
    if (isRgba) {
      token = this.getToken(true, true);
      if (!token.isSymbol(&quot;,&quot;))
        return &quot;&quot;;
      color += &quot;, &quot;;
      
      token = this.getToken(true, true);
      if (!token.isNumber())
        return &quot;&quot;;
      color += token.value;
    }
    
    token = this.getToken(true, true);
    if (!token.isSymbol(&quot;)&quot;))
      return &quot;&quot;;
    color += token.value;
  }
  
  else if (token.isFunction(&quot;hsl(&quot;)
           || token.isFunction(&quot;hsla(&quot;)) {
    color = token.value;
    var isHsla = token.isFunction(&quot;hsla(&quot;)
    token = this.getToken(true, true);
    if (!token.isNumber())
      return &quot;&quot;;
    color += token.value;
    token = this.getToken(true, true);
    if (!token.isSymbol(&quot;,&quot;))
      return &quot;&quot;;
    color += &quot;, &quot;;
    
    token = this.getToken(true, true);
    if (!token.isPercentage())
      return &quot;&quot;;
    color += token.value;
    token = this.getToken(true, true);
    if (!token.isSymbol(&quot;,&quot;))
      return &quot;&quot;;
    color += &quot;, &quot;;
    
    token = this.getToken(true, true);
    if (!token.isPercentage())
      return &quot;&quot;;
    color += token.value;
    
    if (isHsla) {
      token = this.getToken(true, true);
      if (!token.isSymbol(&quot;,&quot;))
        return &quot;&quot;;
      color += &quot;, &quot;;
      
      token = this.getToken(true, true);
      if (!token.isNumber())
        return &quot;&quot;;
      color += token.value;
    }
    
    token = this.getToken(true, true);
    if (!token.isSymbol(&quot;)&quot;))
      return &quot;&quot;;
    color += token.value;
  }
  
  else if (token.isIdent()
           &amp;&amp; (token.value in this.kCOLOR_NAMES))
    color = token.value;
  
  else if (token.isSymbol(&quot;#&quot;)) {
    token = this.getHexValue();
    if (!token.isHex())
      return &quot;&quot;;
    var length = token.value.length;
    if (length != 3 &amp;&amp; length != 6)
      return &quot;&quot;;
    if (token.value.match( /[a-fA-F0-9]/g ).length != length)
      return &quot;&quot;;
    color = &quot;#&quot; + token.value;
  }
  return color;
};

CSSParser.prototype.parseCueShorthand = function(token, declarations, aAcceptPriority)
{
  var before = &quot;&quot;;
  var after = &quot;&quot;;
  
  var values = [];
  var values = [];
  while (true) {
    
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!values.length &amp;&amp; token.isIdent(this.kINHERIT)) {
      values.push(token.value);
    }
    
    else if (token.isIdent(&quot;none&quot;))
      values.push(token.value);
    
    else if (token.isFunction(&quot;url(&quot;)) {
      token = this.getToken(true, true);
      var urlContent = this.parseURL(token);
      if (urlContent)
        values.push(&quot;url(&quot; + urlContent);
      else
        return &quot;&quot;;
    }
    else
      return &quot;&quot;;
    
    token = this.getToken(true, true);
  }
  
  var count = values.length;
  switch (count) {
    case 1:
      before = values[0];
      after = before;
      break;
    case 2:
      before = values[0];
      after = values[1];
      break;
    default:
      return &quot;&quot;;
  }
  this.forgetState();
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;cue-before&quot;, before));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;cue-after&quot;, after));
  return before + &quot; &quot; + after;
};

CSSParser.prototype.parseDeclaration = function(aToken, aDecl, aAcceptPriority, aExpandShorthands, aSheet) {
  this.preserveState();
  var blocks = [];
  if (aToken.isIdent()) {
    var descriptor = aToken.value.toLowerCase();
    var token = this.getToken(true, true);
    if (token.isSymbol(&quot;:&quot;)) {
      var token = this.getToken(true, true);
      
      var value = &quot;&quot;;
      var declarations = [];
      if (aExpandShorthands)
        switch (descriptor) {
          case &quot;background&quot;:
            value = this.parseBackgroundShorthand(token, declarations, aAcceptPriority);
            break;
          case &quot;margin&quot;:
          case &quot;padding&quot;:
            value = this.parseMarginOrPaddingShorthand(token, declarations, aAcceptPriority, descriptor);
            break;
          case &quot;border-color&quot;:
            value = this.parseBorderColorShorthand(token, declarations, aAcceptPriority);
            break;
          case &quot;border-style&quot;:
            value = this.parseBorderStyleShorthand(token, declarations, aAcceptPriority);
            break;
          case &quot;border-width&quot;:
            value = this.parseBorderWidthShorthand(token, declarations, aAcceptPriority);
            break;
          case &quot;border-top&quot;:
          case &quot;border-right&quot;:
          case &quot;border-bottom&quot;:
          case &quot;border-left&quot;:
          case &quot;border&quot;:
          case &quot;outline&quot;:
            value = this.parseBorderEdgeOrOutlineShorthand(token, declarations, aAcceptPriority, descriptor);
            break;
          case &quot;cue&quot;:
            value = this.parseCueShorthand(token, declarations, aAcceptPriority);
            break;
          case &quot;pause&quot;:
            value = this.parsePauseShorthand(token, declarations, aAcceptPriority);
            break;
          case &quot;font&quot;:
            value = this.parseFontShorthand(token, declarations, aAcceptPriority);
            break;
          case &quot;list-style&quot;:
            value = this.parseListStyleShorthand(token, declarations, aAcceptPriority);
            break;
          default:
            value = this.parseDefaultPropertyValue(token, declarations, aAcceptPriority, descriptor, aSheet);
            break;
        }
      else
        value = this.parseDefaultPropertyValue(token, declarations, aAcceptPriority, descriptor, aSheet);
      token = this.currentToken();
      if (value) // no error above
      {
        var priority = false;
        if (token.isSymbol(&quot;!&quot;)) {
          token = this.getToken(true, true);
          if (token.isIdent(&quot;important&quot;)) {
            priority = true;
            token = this.getToken(true, true);
            if (token.isSymbol(&quot;;&quot;) || token.isSymbol(&quot;}&quot;)) {
              if (token.isSymbol(&quot;}&quot;))
                this.ungetToken();
            }
            else return &quot;&quot;;
          }
          else return &quot;&quot;;
        }
        else if  (token.isNotNull() &amp;&amp; !token.isSymbol(&quot;;&quot;) &amp;&amp; !token.isSymbol(&quot;}&quot;))
          return &quot;&quot;;
        for (var i = 0; i &lt; declarations.length; i++) {
          declarations[i].priority = priority;
          aDecl.push(declarations[i]);
        }
        return descriptor + &quot;: &quot; + value + &quot;;&quot;;
      }
    }
  }
  else if (aToken.isComment()) {
    if (this.mPreserveComments) {
      this.forgetState();
      var comment = new jscsspComment();
      comment.parsedCssText = aToken.value;
      aDecl.push(comment);
    }
    return aToken.value;
  }
  
  // we have an error here, let&#x27;s skip it
  this.restoreState();
  var s = aToken.value;
  blocks = [];
  var token = this.getToken(false, false);
  while (token.isNotNull()) {
    s += token.value;
    if ((token.isSymbol(&quot;;&quot;) || token.isSymbol(&quot;}&quot;)) &amp;&amp; !blocks.length) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    } else if (token.isSymbol(&quot;{&quot;)
               || token.isSymbol(&quot;(&quot;)
               || token.isSymbol(&quot;[&quot;)
               || token.isFunction()) {
      blocks.push(token.isFunction() ? &quot;(&quot; : token.value);
    } else if (token.isSymbol(&quot;}&quot;)
               || token.isSymbol(&quot;)&quot;)
               || token.isSymbol(&quot;]&quot;)) {
      if (blocks.length) {
        var ontop = blocks[blocks.length - 1];
        if ((token.isSymbol(&quot;}&quot;) &amp;&amp; ontop == &quot;{&quot;)
            || (token.isSymbol(&quot;)&quot;) &amp;&amp; ontop == &quot;(&quot;)
            || (token.isSymbol(&quot;]&quot;) &amp;&amp; ontop == &quot;[&quot;)) {
          blocks.pop();
        }
      }
    }
    token = this.getToken(false, false);
  }
  return &quot;&quot;;
};

CSSParser.prototype.reportError = function(aMsg) {
  this.mError = aMsg;
};

CSSParser.prototype.consumeError = function() {
  var e = this.mError;
  this.mError = null;
  return e;
};

function CSSParser(aString)
{
  this.mToken = null;
  this.mLookAhead = null;
  this.mScanner = new CSSScanner(aString);
  
  this.mPreserveWS = true;
  this.mPreserveComments = true;
  
  this.mPreservedTokens = [];
  
  this.mError = null;
}

CSSParser.prototype._init = function() {
  this.mToken = null;
  this.mLookAhead = null;
};

CSSParser.prototype.kINHERIT = &quot;inherit&quot;,

CSSParser.prototype.kBORDER_WIDTH_NAMES = {
  &quot;thin&quot;: true,
  &quot;medium&quot;: true,
  &quot;thick&quot;: true
};

CSSParser.prototype.kBORDER_STYLE_NAMES = {
  &quot;none&quot;: true,
  &quot;hidden&quot;: true,
  &quot;dotted&quot;: true,
  &quot;dashed&quot;: true,
  &quot;solid&quot;: true,
  &quot;double&quot;: true,
  &quot;groove&quot;: true,
  &quot;ridge&quot;: true,
  &quot;inset&quot;: true,
  &quot;outset&quot;: true
};

CSSParser.prototype.kCOLOR_NAMES = {
  &quot;transparent&quot;: true,
  
  &quot;black&quot;: true,
  &quot;silver&quot;: true,
  &quot;gray&quot;: true,
  &quot;white&quot;: true,
  &quot;maroon&quot;: true,
  &quot;red&quot;: true,
  &quot;purple&quot;: true,
  &quot;fuchsia&quot;: true,
  &quot;green&quot;: true,
  &quot;lime&quot;: true,
  &quot;olive&quot;: true,
  &quot;yellow&quot;: true,
  &quot;navy&quot;: true,
  &quot;blue&quot;: true,
  &quot;teal&quot;: true,
  &quot;aqua&quot;: true,
  
  &quot;aliceblue&quot;: true,
  &quot;antiquewhite&quot;: true,
  &quot;aquamarine&quot;: true,
  &quot;azure&quot;: true,
  &quot;beige&quot;: true,
  &quot;bisque&quot;: true,
  &quot;blanchedalmond&quot;: true,
  &quot;blueviolet&quot;: true,
  &quot;brown&quot;: true,
  &quot;burlywood&quot;: true,
  &quot;cadetblue&quot;: true,
  &quot;chartreuse&quot;: true,
  &quot;chocolate&quot;: true,
  &quot;coral&quot;: true,
  &quot;cornflowerblue&quot;: true,
  &quot;cornsilk&quot;: true,
  &quot;crimson&quot;: true,
  &quot;cyan&quot;: true,
  &quot;darkblue&quot;: true,
  &quot;darkcyan&quot;: true,
  &quot;darkgoldenrod&quot;: true,
  &quot;darkgray&quot;: true,
  &quot;darkgreen&quot;: true,
  &quot;darkgrey&quot;: true,
  &quot;darkkhaki&quot;: true,
  &quot;darkmagenta&quot;: true,
  &quot;darkolivegreen&quot;: true,
  &quot;darkorange&quot;: true,
  &quot;darkorchid&quot;: true,
  &quot;darkred&quot;: true,
  &quot;darksalmon&quot;: true,
  &quot;darkseagreen&quot;: true,
  &quot;darkslateblue&quot;: true,
  &quot;darkslategray&quot;: true,
  &quot;darkslategrey&quot;: true,
  &quot;darkturquoise&quot;: true,
  &quot;darkviolet&quot;: true,
  &quot;deeppink&quot;: true,
  &quot;deepskyblue&quot;: true,
  &quot;dimgray&quot;: true,
  &quot;dimgrey&quot;: true,
  &quot;dodgerblue&quot;: true,
  &quot;firebrick&quot;: true,
  &quot;floralwhite&quot;: true,
  &quot;forestgreen&quot;: true,
  &quot;gainsboro&quot;: true,
  &quot;ghostwhite&quot;: true,
  &quot;gold&quot;: true,
  &quot;goldenrod&quot;: true,
  &quot;greenyellow&quot;: true,
  &quot;grey&quot;: true,
  &quot;honeydew&quot;: true,
  &quot;hotpink&quot;: true,
  &quot;indianred&quot;: true,
  &quot;indigo&quot;: true,
  &quot;ivory&quot;: true,
  &quot;khaki&quot;: true,
  &quot;lavender&quot;: true,
  &quot;lavenderblush&quot;: true,
  &quot;lawngreen&quot;: true,
  &quot;lemonchiffon&quot;: true,
  &quot;lightblue&quot;: true,
  &quot;lightcoral&quot;: true,
  &quot;lightcyan&quot;: true,
  &quot;lightgoldenrodyellow&quot;: true,
  &quot;lightgray&quot;: true,
  &quot;lightgreen&quot;: true,
  &quot;lightgrey&quot;: true,
  &quot;lightpink&quot;: true,
  &quot;lightsalmon&quot;: true,
  &quot;lightseagreen&quot;: true,
  &quot;lightskyblue&quot;: true,
  &quot;lightslategray&quot;: true,
  &quot;lightslategrey&quot;: true,
  &quot;lightsteelblue&quot;: true,
  &quot;lightyellow&quot;: true,
  &quot;limegreen&quot;: true,
  &quot;linen&quot;: true,
  &quot;magenta&quot;: true,
  &quot;mediumaquamarine&quot;: true,
  &quot;mediumblue&quot;: true,
  &quot;mediumorchid&quot;: true,
  &quot;mediumpurple&quot;: true,
  &quot;mediumseagreen&quot;: true,
  &quot;mediumslateblue&quot;: true,
  &quot;mediumspringgreen&quot;: true,
  &quot;mediumturquoise&quot;: true,
  &quot;mediumvioletred&quot;: true,
  &quot;midnightblue&quot;: true,
  &quot;mintcream&quot;: true,
  &quot;mistyrose&quot;: true,
  &quot;moccasin&quot;: true,
  &quot;navajowhite&quot;: true,
  &quot;oldlace&quot;: true,
  &quot;olivedrab&quot;: true,
  &quot;orange&quot;: true,
  &quot;orangered&quot;: true,
  &quot;orchid&quot;: true,
  &quot;palegoldenrod&quot;: true,
  &quot;palegreen&quot;: true,
  &quot;paleturquoise&quot;: true,
  &quot;palevioletred&quot;: true,
  &quot;papayawhip&quot;: true,
  &quot;peachpuff&quot;: true,
  &quot;peru&quot;: true,
  &quot;pink&quot;: true,
  &quot;plum&quot;: true,
  &quot;powderblue&quot;: true,
  &quot;rosybrown&quot;: true,
  &quot;royalblue&quot;: true,
  &quot;saddlebrown&quot;: true,
  &quot;salmon&quot;: true,
  &quot;sandybrown&quot;: true,
  &quot;seagreen&quot;: true,
  &quot;seashell&quot;: true,
  &quot;sienna&quot;: true,
  &quot;skyblue&quot;: true,
  &quot;slateblue&quot;: true,
  &quot;slategray&quot;: true,
  &quot;slategrey&quot;: true,
  &quot;snow&quot;: true,
  &quot;springgreen&quot;: true,
  &quot;steelblue&quot;: true,
  &quot;tan&quot;: true,
  &quot;thistle&quot;: true,
  &quot;tomato&quot;: true,
  &quot;turquoise&quot;: true,
  &quot;violet&quot;: true,
  &quot;wheat&quot;: true,
  &quot;whitesmoke&quot;: true,
  &quot;yellowgreen&quot;: true,
  
  &quot;activeborder&quot;: true,
  &quot;activecaption&quot;: true,
  &quot;appworkspace&quot;: true,
  &quot;background&quot;: true,
  &quot;buttonface&quot;: true,
  &quot;buttonhighlight&quot;: true,
  &quot;buttonshadow&quot;: true,
  &quot;buttontext&quot;: true,
  &quot;captiontext&quot;: true,
  &quot;graytext&quot;: true,
  &quot;highlight&quot;: true,
  &quot;highlighttext&quot;: true,
  &quot;inactiveborder&quot;: true,
  &quot;inactivecaption&quot;: true,
  &quot;inactivecaptiontext&quot;: true,
  &quot;infobackground&quot;: true,
  &quot;infotext&quot;: true,
  &quot;menu&quot;: true,
  &quot;menutext&quot;: true,
  &quot;scrollbar&quot;: true,
  &quot;threeddarkshadow&quot;: true,
  &quot;threedface&quot;: true,
  &quot;threedhighlight&quot;: true,
  &quot;threedlightshadow&quot;: true,
  &quot;threedshadow&quot;: true,
  &quot;window&quot;: true,
  &quot;windowframe&quot;: true,
  &quot;windowtext&quot;: true
};

CSSParser.prototype.kLIST_STYLE_TYPE_NAMES = {
  &quot;decimal&quot;: true,
  &quot;decimal-leading-zero&quot;: true,
  &quot;lower-roman&quot;: true,
  &quot;upper-roman&quot;: true,
  &quot;georgian&quot;: true,
  &quot;armenian&quot;: true,
  &quot;lower-latin&quot;: true,
  &quot;lower-alpha&quot;: true,
  &quot;upper-latin&quot;: true,
  &quot;upper-alpha&quot;: true,
  &quot;lower-greek&quot;: true,
  
  &quot;disc&quot;: true,
  &quot;circle&quot;: true,
  &quot;square&quot;: true,
  &quot;none&quot;: true,
  
  /* CSS 3 */
  &quot;box&quot;: true,
  &quot;check&quot;: true,
  &quot;diamond&quot;: true,
  &quot;hyphen&quot;: true,
  
  &quot;lower-armenian&quot;: true,
  &quot;cjk-ideographic&quot;: true,
  &quot;ethiopic-numeric&quot;: true,
  &quot;hebrew&quot;: true,
  &quot;japanese-formal&quot;: true,
  &quot;japanese-informal&quot;: true,
  &quot;simp-chinese-formal&quot;: true,
  &quot;simp-chinese-informal&quot;: true,
  &quot;syriac&quot;: true,
  &quot;tamil&quot;: true,
  &quot;trad-chinese-formal&quot;: true,
  &quot;trad-chinese-informal&quot;: true,
  &quot;upper-armenian&quot;: true,
  &quot;arabic-indic&quot;: true,
  &quot;binary&quot;: true,
  &quot;bengali&quot;: true,
  &quot;cambodian&quot;: true,
  &quot;khmer&quot;: true,
  &quot;devanagari&quot;: true,
  &quot;gujarati&quot;: true,
  &quot;gurmukhi&quot;: true,
  &quot;kannada&quot;: true,
  &quot;lower-hexadecimal&quot;: true,
  &quot;lao&quot;: true,
  &quot;malayalam&quot;: true,
  &quot;mongolian&quot;: true,
  &quot;myanmar&quot;: true,
  &quot;octal&quot;: true,
  &quot;oriya&quot;: true,
  &quot;persian&quot;: true,
  &quot;urdu&quot;: true,
  &quot;telugu&quot;: true,
  &quot;tibetan&quot;: true,
  &quot;upper-hexadecimal&quot;: true,
  &quot;afar&quot;: true,
  &quot;ethiopic-halehame-aa-et&quot;: true,
  &quot;ethiopic-halehame-am-et&quot;: true,
  &quot;amharic-abegede&quot;: true,
  &quot;ehiopic-abegede-am-et&quot;: true,
  &quot;cjk-earthly-branch&quot;: true,
  &quot;cjk-heavenly-stem&quot;: true,
  &quot;ethiopic&quot;: true,
  &quot;ethiopic-abegede&quot;: true,
  &quot;ethiopic-abegede-gez&quot;: true,
  &quot;hangul-consonant&quot;: true,
  &quot;hangul&quot;: true,
  &quot;hiragana-iroha&quot;: true,
  &quot;hiragana&quot;: true,
  &quot;katakana-iroha&quot;: true,
  &quot;katakana&quot;: true,
  &quot;lower-norwegian&quot;: true,
  &quot;oromo&quot;: true,
  &quot;ethiopic-halehame-om-et&quot;: true,
  &quot;sidama&quot;: true,
  &quot;ethiopic-halehame-sid-et&quot;: true,
  &quot;somali&quot;: true,
  &quot;ethiopic-halehame-so-et&quot;: true,
  &quot;tigre&quot;: true,
  &quot;ethiopic-halehame-tig&quot;: true,
  &quot;tigrinya-er-abegede&quot;: true,
  &quot;ethiopic-abegede-ti-er&quot;: true,
  &quot;tigrinya-et&quot;: true,
  &quot;ethiopic-halehame-ti-et&quot;: true,
  &quot;upper-greek&quot;: true,
  &quot;asterisks&quot;: true,
  &quot;footnotes&quot;: true,
  &quot;circled-decimal&quot;: true,
  &quot;circled-lower-latin&quot;: true,
  &quot;circled-upper-latin&quot;: true,
  &quot;dotted-decimal&quot;: true,
  &quot;double-circled-decimal&quot;: true,
  &quot;filled-circled-decimal&quot;: true,
  &quot;parenthesised-decimal&quot;: true,
  &quot;parenthesised-lower-latin&quot;: true
};

CSSParser.prototype.parseFontFaceRule = function(aToken, aSheet) {
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  var s = aToken.value;
  var valid = false;
  var descriptors = [];
  this.preserveState();
  var token = this.getToken(true, true);
  if (token.isNotNull()) {
    // expecting block start
    if (token.isSymbol(&quot;{&quot;)) {
      s += &quot; &quot; + token.value;
      var token = this.getToken(true, false);
      while (true) {
        if (token.isSymbol(&quot;}&quot;)) {
          s += &quot;}&quot;;
          valid = true;
          break;
        } else {
          var d = this.parseDeclaration(token, descriptors, false, false, aSheet);
          s += ((d &amp;&amp; descriptors.length) ? &quot; &quot; : &quot;&quot;) + d;
        }
        token = this.getToken(true, false);
      }
    }
  }
  if (valid) {
    this.forgetState();
    var rule = new jscsspFontFaceRule();
    rule.currentLine = currentLine;
    rule.parsedCssText = s;
    rule.descriptors = descriptors;
    rule.parentStyleSheet = aSheet;
    aSheet.cssRules.push(rule)
    return true;
  }
  this.restoreState();
  return false;
};

CSSParser.prototype.parseFontShorthand = function(token, aDecl, aAcceptPriority)
{
  var kStyle = {&quot;italic&quot;: true, &quot;oblique&quot;: true };
  var kVariant = {&quot;small-caps&quot;: true };
  var kWeight = { &quot;bold&quot;: true, &quot;bolder&quot;: true, &quot;lighter&quot;: true,
    &quot;100&quot;: true, &quot;200&quot;: true, &quot;300&quot;: true, &quot;400&quot;: true,
    &quot;500&quot;: true, &quot;600&quot;: true, &quot;700&quot;: true, &quot;800&quot;: true,
    &quot;900&quot;: true };
  var kSize = { &quot;xx-small&quot;: true, &quot;x-small&quot;: true, &quot;small&quot;: true, &quot;medium&quot;: true,
    &quot;large&quot;: true, &quot;x-large&quot;: true, &quot;xx-large&quot;: true,
    &quot;larger&quot;: true, &quot;smaller&quot;: true };
  var kValues = { &quot;caption&quot;: true, &quot;icon&quot;: true, &quot;menu&quot;: true, &quot;message-box&quot;: true, &quot;small-caption&quot;: true, &quot;status-bar&quot;: true };
  var kFamily = { &quot;serif&quot;: true, &quot;sans-serif&quot;: true, &quot;cursive&quot;: true, &quot;fantasy&quot;: true, &quot;monospace&quot;: true };
  
  var fStyle = null;
  var fVariant = null;
  var fWeight = null;
  var fSize = null;
  var fLineHeight = null;
  var fFamily = &quot;&quot;;
  var fSystem = null;
  var fFamilyValues = [];
  
  var normalCount = 0;
  while (true) {
    
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!fStyle &amp;&amp; !fVariant &amp;&amp; !fWeight
             &amp;&amp; !fSize &amp;&amp; !fLineHeight &amp;&amp; !fFamily
             &amp;&amp; !fSystem
             &amp;&amp; token.isIdent(this.kINHERIT)) {
      fStyle = this.kINHERIT;
      fVariant = this.kINHERIT;
      fWeight = this.kINHERIT;
      fSize = this.kINHERIT;
      fLineHeight = this.kINHERIT;
      fFamily = this.kINHERIT;
      fSystem = this.kINHERIT;
    }
    
    else {
      if (!fSystem &amp;&amp; (token.isIdent() &amp;&amp; token.value in kValues)) {
        fSystem = token.value;
        break;
      }
      
      else {
        if (!fStyle
            &amp;&amp; token.isIdent()
            &amp;&amp; (token.value in kStyle)) {
          fStyle = token.value;
        }
        
        else if (!fVariant
                 &amp;&amp; token.isIdent()
                 &amp;&amp; (token.value in kVariant)) {
          fVariant = token.value;
        }
        
        else if (!fWeight
                 &amp;&amp; (token.isIdent() || token.isNumber())
                 &amp;&amp; (token.value in kWeight)) {
          fWeight = token.value;
        }
        
        else if (!fSize
                 &amp;&amp; ((token.isIdent() &amp;&amp; (token.value in kSize))
                     || token.isDimension()
                     || token.isPercentage())) {
                   fSize = token.value;
                   token = this.getToken(false, false);
                   if (token.isSymbol(&quot;/&quot;)) {
                     token = this.getToken(false, false);
                     if (!fLineHeight &amp;&amp;
                         (token.isDimension() || token.isNumber() || token.isPercentage())) {
                       fLineHeight = token.value;
                     }
                     else
                       return &quot;&quot;;
                   }
                   else if (!token.isWhiteSpace())
                     continue;
                 }
        
        else if (token.isIdent(&quot;normal&quot;)) {
          normalCount++;
          if (normalCount &gt; 3)
            return &quot;&quot;;
        }
        
        else if (!fFamily &amp;&amp; // *MUST* be last to be tested here
                 (token.isString()
                  || token.isIdent())) {
                   var lastWasComma = false;
                   while (true) {
                     if (!token.isNotNull())
                       break;
                     else if (token.isSymbol(&quot;;&quot;)
                              || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
                              || token.isSymbol(&quot;}&quot;)) {
                       this.ungetToken();
                       break;
                     }
                     else if (token.isIdent() &amp;&amp; token.value in kFamily) {
                       var value = new jscsspVariable(kJscsspPRIMITIVE_VALUE, null);
                       value.value = token.value;
                       fFamilyValues.push(value);
                       fFamily += token.value;
                       break;
                     }
                     else if (token.isString() || token.isIdent()) {
                       var value = new jscsspVariable(kJscsspPRIMITIVE_VALUE, null);
                       value.value = token.value;
                       fFamilyValues.push(value);
                       fFamily += token.value;
                       lastWasComma = false;
                     }
                     else if (!lastWasComma &amp;&amp; token.isSymbol(&quot;,&quot;)) {
                       fFamily += &quot;, &quot;;
                       lastWasComma = true;
                     }
                     else
                       return &quot;&quot;;
                     token = this.getToken(true, true);
                   }
                 }
        
        else {
          return &quot;&quot;;
        }
      }
      
    }
    
    token = this.getToken(true, true);
  }
  
  // create the declarations
  this.forgetState();
  if (fSystem) {
    aDecl.push(this._createJscsspDeclarationFromValue(&quot;font&quot;, fSystem));
    return fSystem;
  }
  fStyle = fStyle ? fStyle : &quot;normal&quot;;
  fVariant = fVariant ? fVariant : &quot;normal&quot;;
  fWeight = fWeight ? fWeight : &quot;normal&quot;;
  fSize = fSize ? fSize : &quot;medium&quot;;
  fLineHeight = fLineHeight ? fLineHeight : &quot;normal&quot;;
  fFamily = fFamily ? fFamily : &quot;-moz-initial&quot;;
  
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;font-style&quot;, fStyle));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;font-variant&quot;, fVariant));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;font-weight&quot;, fWeight));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;font-size&quot;, fSize));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;line-height&quot;, fLineHeight));
  aDecl.push(this._createJscsspDeclarationFromValuesArray(&quot;font-family&quot;, fFamilyValues, fFamily));
  return fStyle + &quot; &quot; + fVariant + &quot; &quot; + fWeight + &quot; &quot; + fSize + &quot;/&quot; + fLineHeight + &quot; &quot; + fFamily;
};

CSSParser.prototype.parseFunctionArgument = function(token)
{
  var value = &quot;&quot;;
  if (token.isString())
  {
    value += token.value;
    token = this.getToken(true, true);
  }
  else {
    var parenthesis = 1;
    while (true)
    {
      if (!token.isNotNull())
        return &quot;&quot;;
      if (token.isFunction() || token.isSymbol(&quot;(&quot;))
        parenthesis++;
      if (token.isSymbol(&quot;)&quot;)) {
        parenthesis--;
        if (!parenthesis)
          break;
      }
      value += token.value;
      token = this.getToken(false, false);
    }
  }
  
  if (token.isSymbol(&quot;)&quot;))
    return value + &quot;)&quot;;
  return &quot;&quot;;
};

CSSParser.prototype.parseColorStop = function(token)
{
  var color = this.parseColor(token);
  var position = &quot;&quot;;
  if (!color)
    return null;
  token = this.getToken(true, true);
  if (token.isLength()) {
    position = token.value;
    token = this.getToken(true, true);
  }
  return { color: color, position: position }
};

CSSParser.prototype.parseGradient = function ()
{
  var kHPos = {&quot;left&quot;: true, &quot;right&quot;: true };
  var kVPos = {&quot;top&quot;: true, &quot;bottom&quot;: true };
  var kPos = {&quot;left&quot;: true, &quot;right&quot;: true, &quot;top&quot;: true, &quot;bottom&quot;: true, &quot;center&quot;: true};
  
  var isRadial = false;
  var gradient = { isRepeating: false };
  var token = this.getToken(true, true);
  if (token.isNotNull()) {
    if (token.isFunction(&quot;linear-gradient(&quot;) ||
        token.isFunction(&quot;radial-gradient(&quot;) ||
        token.isFunction(&quot;repeating-linear-gradient(&quot;) ||
        token.isFunction(&quot;repeating-radial-gradient(&quot;)) {
      if (token.isFunction(&quot;radial-gradient(&quot;) ||
          token.isFunction(&quot;repeating-radial-gradient(&quot;)) {
        gradient.isRadial = true;
      }
      if (token.isFunction(&quot;repeating-linear-gradient(&quot;) ||
          token.isFunction(&quot;repeating-radial-gradient(&quot;)) {
        gradient.isRepeating = true;
      }
      
      
      token = this.getToken(true, true);
      var foundPosition = false;
      var haveAngle = false;
      
      /********** LINEAR **********/
      if (token.isAngle()) {
        gradient.angle = token.value;
        haveAngle = true;
        token = this.getToken(true, true);
        if (!token.isSymbol(&quot;,&quot;))
          return null;
        token = this.getToken(true, true);
      }
      
      else if (token.isIdent(&quot;to&quot;)) {
        foundPosition = true;
        token = this.getToken(true, true);
        if (token.isIdent(&quot;top&quot;)
            || token.isIdent(&quot;bottom&quot;)
            || token.isIdent(&quot;left&quot;)
            || token.isIdent(&quot;right&quot;)) {
          gradient.position = token.value;
          token = this.getToken(true, true);
          if (((gradient.position == &quot;top&quot; || gradient.position == &quot;bottom&quot;) &amp;&amp; (token.isIdent(&quot;left&quot;) || token.isIdent(&quot;right&quot;)))
              || ((gradient.position == &quot;left&quot; || gradient.position == &quot;right&quot;) &amp;&amp; (token.isIdent(&quot;top&quot;) || token.isIdent(&quot;bottom&quot;)))) {
            gradient.position += &quot; &quot; + token.value;
            token = this.getToken(true, true);
          }
        }
        else
          return null;
        
        if (!token.isSymbol(&quot;,&quot;))
          return null;
        token = this.getToken(true, true);
      }
      
      /********** RADIAL **********/
      else if (gradient.isRadial) {
        gradient.shape = &quot;&quot;;
        gradient.extent = &quot;&quot;;
        gradient.positions = [];
        gradient.at = &quot;&quot;;
        
        while (!token.isIdent(&quot;at&quot;) &amp;&amp; !token.isSymbol(&quot;,&quot;)) {
          if (!gradient.shape
              &amp;&amp; (token.isIdent(&quot;circle&quot;) || token.isIdent(&quot;ellipse&quot;))) {
            gradient.shape = token.value;
            token = this.getToken(true, true);
          }
          else if (!gradient.extent
                   &amp;&amp; (token.isIdent(&quot;closest-corner&quot;)
                       || token.isIdent(&quot;closes-side&quot;)
                       || token.isIdent(&quot;farthest-corner&quot;)
                       || token.isIdent(&quot;farthest-corner&quot;))) {
                     gradient.extent = token.value;
                     token = this.getToken(true, true);
                   }
          else if (gradient.positions.length &lt; 2 &amp;&amp; token.isLength()){
            gradient.positions.push(token.value);
            token = this.getToken(true, true);
          }
          else
            break;
        }
        
        // verify if the shape is null of well defined
        if ((gradient.positions.length == 1 &amp;&amp; !gradient.extent &amp;&amp; (gradient.shape == &quot;circle&quot; || !gradient.shape))
            || (gradient.positions.length == 2 &amp;&amp; !gradient.extent &amp;&amp; (gradient.shape == &quot;ellipse&quot; || !gradient.shape))
            || (!gradient.positions.length &amp;&amp; gradient.extent)
            || (!gradient.positions.length &amp;&amp; !gradient.extent)) {
          // shape ok
        }
        else  {
          return null;
        }
        
        if (token.isIdent(&quot;at&quot;)) {
          token = this.getToken(true, true);
          if (((token.isIdent() &amp;&amp; token.value in kPos)
               || token.isDimension()
               || token.isNumber(&quot;0&quot;)
               || token.isPercentage())) {
            gradient.at = token.value;
            token = this.getToken(true, true);
            if (token.isDimension() || token.isNumber(&quot;0&quot;) || token.isPercentage()) {
              gradient.at += &quot; &quot; + token.value;
            }
            else if (token.isIdent() &amp;&amp; token.value in kPos) {
              if ((gradient.at in kHPos &amp;&amp; token.value in kHPos) ||
                  (gradient.at in kVPos &amp;&amp; token.value in kVPos))
                return &quot;&quot;;
              gradient.at += &quot; &quot; + token.value;
            }
            else {
              this.ungetToken();
              gradient.at += &quot; center&quot;;
            }
          }
          else
            return null;
          
          token = this.getToken(true, true);
        }
        
        if (gradient.shape || gradient.extent || gradient.positions.length || gradient.at) {
          if (!token.isSymbol(&quot;,&quot;))
            return null;
          token = this.getToken(true, true);
        }
      }
      
      // now color stops...
      var stop1 = this.parseColorStop(token);
      if (!stop1)
        return null;
      token = this.currentToken();
      if (!token.isSymbol(&quot;,&quot;))
        return null;
      token = this.getToken(true, true);
      var stop2 = this.parseColorStop(token);
      if (!stop2)
        return null;
      token = this.currentToken();
      if (token.isSymbol(&quot;,&quot;)) {
        token = this.getToken(true, true);
      }
      // ok we have at least two color stops
      gradient.stops = [stop1, stop2];
      while (!token.isSymbol(&quot;)&quot;)) {
        var colorstop = this.parseColorStop(token);
        if (!colorstop)
          return null;
        token = this.currentToken();
        if (!token.isSymbol(&quot;)&quot;) &amp;&amp; !token.isSymbol(&quot;,&quot;))
          return null;
        if (token.isSymbol(&quot;,&quot;))
          token = this.getToken(true, true);
        gradient.stops.push(colorstop);
      }
      return gradient;
    }
  }
  return null;
};

CSSParser.prototype.serializeGradient = function(gradient)
{
  var s = gradient.isRadial
  ? (gradient.isRepeating ? &quot;repeating-radial-gradient(&quot; : &quot;radial-gradient(&quot; )
  : (gradient.isRepeating ? &quot;repeating-linear-gradient(&quot; : &quot;linear-gradient(&quot; );
  if (gradient.angle || gradient.position)
    s += (gradient.angle ? gradient.angle: &quot;&quot;) +
    (gradient.position ? &quot;to &quot; + gradient.position : &quot;&quot;) +
    &quot;, &quot;;
  
  if (gradient.isRadial)
    s += (gradient.shape ? gradient.shape + &quot; &quot; : &quot;&quot;) +
    (gradient.extent ? gradient.extent + &quot; &quot; : &quot;&quot;) +
    (gradient.positions.length ? gradient.positions.join(&quot; &quot;) + &quot; &quot; : &quot;&quot;) +
    (gradient.at ? &quot;at &quot; + gradient.at + &quot; &quot; : &quot;&quot;) +
    (gradient.shape || gradient.extent || gradient.positions.length || gradient.at ? &quot;, &quot; : &quot;&quot;);
  
  for (var i = 0; i &lt; gradient.stops.length; i++) {
    var colorstop = gradient.stops[i];
    s += colorstop.color + (colorstop.position ? &quot; &quot; + colorstop.position : &quot;&quot;);
    if (i != gradient.stops.length -1)
      s += &quot;, &quot;;
  }
  s += &quot;)&quot;;
  return s;
};


CSSParser.prototype.parseImportRule = function(aToken, aSheet) {
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  var s = aToken.value;
  this.preserveState();
  var token = this.getToken(true, true);
  var media = [];
  var href = &quot;&quot;;
  if (token.isString()) {
    href = token.value;
    s += &quot; &quot; + href;
  }
  else if (token.isFunction(&quot;url(&quot;)) {
    token = this.getToken(true, true);
    var urlContent = this.parseURL(token);
    if (urlContent) {
      href = &quot;url(&quot; + urlContent;
      s += &quot; &quot; + href;
    }
  }
  else
    this.reportError(kIMPORT_RULE_MISSING_URL);
  
  if (href) {
    token = this.getToken(true, true);
    while (token.isIdent()) {
      s += &quot; &quot; + token.value;
      media.push(token.value);
      token = this.getToken(true, true);
      if (!token)
        break;
      if (token.isSymbol(&quot;,&quot;)) {
        s += &quot;,&quot;;
      } else if (token.isSymbol(&quot;;&quot;)) {
        break;
      } else
        break;
      token = this.getToken(true, true);
    }
    
    if (!media.length) {
      media.push(&quot;all&quot;);
    }
    
    if (token.isSymbol(&quot;;&quot;)) {
      s += &quot;;&quot;
      this.forgetState();
      var rule = new jscsspImportRule();
      rule.currentLine = currentLine;
      rule.parsedCssText = s;
      rule.href = href;
      rule.media = media;
      rule.parentStyleSheet = aSheet;
      aSheet.cssRules.push(rule);
      return true;
    }
  }
  
  this.restoreState();
  this.addUnknownAtRule(aSheet, &quot;@import&quot;);
  return false;
};

CSSParser.prototype.parseKeyframesRule = function(aToken, aSheet) {
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  var s = aToken.value;
  var valid = false;
  var keyframesRule = new jscsspKeyframesRule();
  keyframesRule.currentLine = currentLine;
  this.preserveState();
  var token = this.getToken(true, true);
  var foundName = false;
  while (token.isNotNull()) {
    if (token.isIdent()) {
      // should be the keyframes&#x27; name
      foundName = true;
      s += &quot; &quot; + token.value;
      keyframesRule.name = token.value;
      token = this.getToken(true, true);
      if (token.isSymbol(&quot;{&quot;))
        this.ungetToken();
      else {
        // error...
        token.type = jscsspToken.NULL_TYPE;
        break;
      }
    }
    else if (token.isSymbol(&quot;{&quot;)) {
      if (!foundName) {
        token.type = jscsspToken.NULL_TYPE;
        // not a valid keyframes at-rule
      }
      break;
    }
    else {
      token.type = jscsspToken.NULL_TYPE;
      // not a valid keyframes at-rule
      break;
    }
    token = this.getToken(true, true);
  }
  
  if (token.isSymbol(&quot;{&quot;) &amp;&amp; keyframesRule.name) {
    // ok let&#x27;s parse keyframe rules now...
    s += &quot; { &quot;;
    token = this.getToken(true, false);
    while (token.isNotNull()) {
      if (token.isComment() &amp;&amp; this.mPreserveComments) {
        s += &quot; &quot; + token.value;
        var comment = new jscsspComment();
        comment.parsedCssText = token.value;
        keyframesRule.cssRules.push(comment);
      } else if (token.isSymbol(&quot;}&quot;)) {
        valid = true;
        break;
      } else {
        var r = this.parseKeyframeRule(token, keyframesRule, true);
        if (r)
          s += r;
      }
      token = this.getToken(true, false);
    }
  }
  if (valid) {
    this.forgetState();
    keyframesRule.currentLine = currentLine;
    keyframesRule.parsedCssText = s;
    aSheet.cssRules.push(keyframesRule);
    return true;
  }
  this.restoreState();
  return false;
};

CSSParser.prototype.parseKeyframeRule = function(aToken, aOwner) {
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  this.preserveState();
  var token = aToken;
  
  // find the keyframe keys
  var key = &quot;&quot;;
  while (token.isNotNull()) {
    if (token.isIdent() || token.isPercentage()) {
      if (token.isIdent()
          &amp;&amp; !token.isIdent(&quot;from&quot;)
          &amp;&amp; !token.isIdent(&quot;to&quot;)) {
        key = &quot;&quot;;
        break;
      }
      key += token.value;
      token = this.getToken(true, true);
      if (token.isSymbol(&quot;{&quot;)) {
        this.ungetToken();
        break;
      }
      else 
        if (token.isSymbol(&quot;,&quot;)) {
          key += &quot;, &quot;;
        }
        else {
          key = &quot;&quot;;
          break;
        }
    }
    else {
      key = &quot;&quot;;
      break;
    }
    token = this.getToken(true, true);
  }
  
  var valid = false;
  var declarations = [];
  if (key) {
    var s = key;
    token = this.getToken(true, true);
    if (token.isSymbol(&quot;{&quot;)) {
      s += &quot; { &quot;;
      token = this.getToken(true, false);
      while (true) {
        if (!token.isNotNull()) {
          valid = true;
          break;
        }
        if (token.isSymbol(&quot;}&quot;)) {
          s += &quot;}&quot;;
          valid = true;
          break;
        } else {
          var d = this.parseDeclaration(token, declarations, true, true, aOwner);
          s += ((d &amp;&amp; declarations.length) ? &quot; &quot; : &quot;&quot;) + d;
        }
        token = this.getToken(true, false);
      }
    }
  }
  else {
    // key is invalid so the whole rule is invalid with it
  }
  
  if (valid) {
    var rule = new jscsspKeyframeRule();
    rule.currentLine = currentLine;
    rule.parsedCssText = s;
    rule.declarations = declarations;
    rule.keyText = key;
    rule.parentRule = aOwner;
    aOwner.cssRules.push(rule);
    return s;
  }
  this.restoreState();
  s = this.currentToken().value;
  this.addUnknownAtRule(aOwner, s);
  return &quot;&quot;;
};

CSSParser.prototype.parseListStyleShorthand = function(token, aDecl, aAcceptPriority)
{
  var kPosition = { &quot;inside&quot;: true, &quot;outside&quot;: true };
  
  var lType = null;
  var lPosition = null;
  var lImage = null;
  
  while (true) {
    
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!lType &amp;&amp; !lPosition &amp;&amp; ! lImage
             &amp;&amp; token.isIdent(this.kINHERIT)) {
      lType = this.kINHERIT;
      lPosition = this.kINHERIT;
      lImage = this.kINHERIT;
    }
    
    else if (!lType &amp;&amp;
             (token.isIdent() &amp;&amp; token.value in this.kLIST_STYLE_TYPE_NAMES)) {
      lType = token.value;
    }
    
    else if (!lPosition &amp;&amp;
             (token.isIdent() &amp;&amp; token.value in kPosition)) {
      lPosition = token.value;
    }
    
    else if (!lImage &amp;&amp; token.isFunction(&quot;url&quot;)) {
      token = this.getToken(true, true);
      var urlContent = this.parseURL(token);
      if (urlContent) {
        lImage = &quot;url(&quot; + urlContent;
      }
      else
        return &quot;&quot;;
    }
    else if (!token.isIdent(&quot;none&quot;))
      return &quot;&quot;;
    
    token = this.getToken(true, true);
  }
  
  // create the declarations
  this.forgetState();
  lType = lType ? lType : &quot;none&quot;;
  lImage = lImage ? lImage : &quot;none&quot;;
  lPosition = lPosition ? lPosition : &quot;outside&quot;;
  
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;list-style-type&quot;, lType));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;list-style-position&quot;, lPosition));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;list-style-image&quot;, lImage));
  return lType + &quot; &quot; + lPosition + &quot; &quot; + lImage;
};

CSSParser.prototype.parse = function(aString, aTryToPreserveWhitespaces, aTryToPreserveComments) {
  if (!aString)
    return null; // early way out if we can
  
  this.mPreserveWS       = aTryToPreserveWhitespaces;
  this.mPreserveComments = aTryToPreserveComments;
  this.mPreservedTokens = [];
  this.mScanner.init(aString);
  var sheet = new jscsspStylesheet();
  
  // @charset can only appear at first char of the stylesheet
  var token = this.getToken(false, false);
  if (!token.isNotNull())
    return sheet;
  if (token.isAtRule(&quot;@charset&quot;)) {
    this.ungetToken();
    this.parseCharsetRule(sheet);
    token = this.getToken(false, false);
  }
  
  var foundStyleRules = false;
  var foundImportRules = false;
  var foundNameSpaceRules = false;
  while (true) {
    if (!token.isNotNull())
      break;
    if (token.isWhiteSpace())
    {
      if (aTryToPreserveWhitespaces)
        this.addWhitespace(sheet, token.value);
    }
    
    else if (token.isComment())
    {
      if (this.mPreserveComments)
        this.addComment(sheet, token.value);
    }
    
    else if (token.isAtRule()) {
      if (token.isAtRule(&quot;@variables&quot;)) {
        if (!foundImportRules &amp;&amp; !foundStyleRules)
          this.parseVariablesRule(token, sheet);
        else {
          this.reportError(kVARIABLES_RULE_POSITION);
          this.addUnknownAtRule(sheet, token.value);
        }
      }
      else if (token.isAtRule(&quot;@import&quot;)) {
        // @import rules MUST occur before all style and namespace
        // rules
        if (!foundStyleRules &amp;&amp; !foundNameSpaceRules)
          foundImportRules = this.parseImportRule(token, sheet);
        else {
          this.reportError(kIMPORT_RULE_POSITION);
          this.addUnknownAtRule(sheet, token.value);
        }
      }
      else if (token.isAtRule(&quot;@namespace&quot;)) {
        // @namespace rules MUST occur before all style rule and
        // after all @import rules
        if (!foundStyleRules)
          foundNameSpaceRules = this.parseNamespaceRule(token, sheet);
        else {
          this.reportError(kNAMESPACE_RULE_POSITION);
          this.addUnknownAtRule(sheet, token.value);
        }
      }
      else if (token.isAtRule(&quot;@font-face&quot;)) {
        if (this.parseFontFaceRule(token, sheet))
          foundStyleRules = true;
        else
          this.addUnknownAtRule(sheet, token.value);
      }
      else if (token.isAtRule(&quot;@page&quot;)) {
        if (this.parsePageRule(token, sheet))
          foundStyleRules = true;
        else
          this.addUnknownAtRule(sheet, token.value);
      }
      else if (token.isAtRule(&quot;@media&quot;)) {
        if (this.parseMediaRule(token, sheet))
          foundStyleRules = true;
        else
          this.addUnknownAtRule(sheet, token.value);
      }
      else if (token.isAtRule(&quot;@keyframes&quot;)) {
        if (!this.parseKeyframesRule(token, sheet))
          this.addUnknownAtRule(sheet, token.value);
      }
      else if (token.isAtRule(&quot;@charset&quot;)) {
        this.reportError(kCHARSET_RULE_CHARSET_SOF);
        this.addUnknownAtRule(sheet, token.value);
      }
      else {
        this.reportError(kUNKNOWN_AT_RULE);
        this.addUnknownAtRule(sheet, token.value);
      }
    }
    
    else // plain style rules
    {
      var ruleText = this.parseStyleRule(token, sheet, false);
      if (ruleText)
        foundStyleRules = true;
    }
    token = this.getToken(false);
  }
  
  return sheet;
};
CSSParser.prototype.parseMarginOrPaddingShorthand = function(token, aDecl, aAcceptPriority, aProperty)
{
  var top = null;
  var bottom = null;
  var left = null;
  var right = null;
  
  var values = [];
  while (true) {
    
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!values.length &amp;&amp; token.isIdent(this.kINHERIT)) {
      values.push(token.value);
      token = this.getToken(true, true);
      break;
    }
    
    else if (token.isDimension()
             || token.isNumber(&quot;0&quot;)
             || token.isPercentage()
             || token.isIdent(&quot;auto&quot;)) {
      values.push(token.value);
    }
    else
      return &quot;&quot;;
    
    token = this.getToken(true, true);
  }
  
  var count = values.length;
  switch (count) {
    case 1:
      top = values[0];
      bottom = top;
      left = top;
      right = top;
      break;
    case 2:
      top = values[0];
      bottom = top;
      left = values[1];
      right = left;
      break;
    case 3:
      top = values[0];
      left = values[1];
      right = left;
      bottom = values[2];
      break;
    case 4:
      top = values[0];
      right = values[1];
      bottom = values[2];
      left = values[3];
      break;
    default:
      return &quot;&quot;;
  }
  this.forgetState();
  aDecl.push(this._createJscsspDeclarationFromValue(aProperty + &quot;-top&quot;, top));
  aDecl.push(this._createJscsspDeclarationFromValue(aProperty + &quot;-right&quot;, right));
  aDecl.push(this._createJscsspDeclarationFromValue(aProperty + &quot;-bottom&quot;, bottom));
  aDecl.push(this._createJscsspDeclarationFromValue(aProperty + &quot;-left&quot;, left));
  return top + &quot; &quot; + right + &quot; &quot; + bottom + &quot; &quot; + left;
};

CSSParser.prototype.parseMediaQuery = function()
{
  var kCONSTRAINTS = {
    &quot;width&quot;: true,
    &quot;min-width&quot;: true,
    &quot;max-width&quot;: true,
    &quot;height&quot;: true,
    &quot;min-height&quot;: true,
    &quot;max-height&quot;: true,
    &quot;device-width&quot;: true,
    &quot;min-device-width&quot;: true,
    &quot;max-device-width&quot;: true,
    &quot;device-height&quot;: true,
    &quot;min-device-height&quot;: true,
    &quot;max-device-height&quot;: true,
    &quot;orientation&quot;: true,
    &quot;aspect-ratio&quot;: true,
    &quot;min-aspect-ratio&quot;: true,
    &quot;max-aspect-ratio&quot;: true,
    &quot;device-aspect-ratio&quot;: true,
    &quot;min-device-aspect-ratio&quot;: true,
    &quot;max-device-aspect-ratio&quot;: true,
    &quot;color&quot;: true,
    &quot;min-color&quot;: true,
    &quot;max-color&quot;: true,
    &quot;color-index&quot;: true,
    &quot;min-color-index&quot;: true,
    &quot;max-color-index&quot;: true,
    &quot;monochrome&quot;: true,
    &quot;min-monochrome&quot;: true,
    &quot;max-monochrome&quot;: true,
    &quot;resolution&quot;: true,
    &quot;min-resolution&quot;: true,
    &quot;max-resolution&quot;: true,
    &quot;scan&quot;: true,
    &quot;grid&quot;: true
  };
  
  var m = {cssText: &quot;&quot;, amplifier: &quot;&quot;, medium: &quot;&quot;, constraints: []};
  var token = this.getToken(true, true);
  
  if (token.isIdent(&quot;all&quot;) ||
      token.isIdent(&quot;aural&quot;) ||
      token.isIdent(&quot;braille&quot;) ||
      token.isIdent(&quot;handheld&quot;) ||
      token.isIdent(&quot;print&quot;) ||
      token.isIdent(&quot;projection&quot;) ||
      token.isIdent(&quot;screen&quot;) ||
      token.isIdent(&quot;tty&quot;) ||
      token.isIdent(&quot;tv&quot;)) {
    m.medium = token.value;
    m.cssText += token.value;
    token = this.getToken(true, true);
  }
  else if (token.isIdent(&quot;not&quot;) || token.isIdent(&quot;only&quot;)) {
    m.amplifier = token.value.toLowerCase();
    m.cssText += token.value.toLowerCase();
    token = this.getToken(true, true);
    if (token.isIdent(&quot;all&quot;) ||
        token.isIdent(&quot;aural&quot;) ||
        token.isIdent(&quot;braille&quot;) ||
        token.isIdent(&quot;handheld&quot;) ||
        token.isIdent(&quot;print&quot;) ||
        token.isIdent(&quot;projection&quot;) ||
        token.isIdent(&quot;screen&quot;) ||
        token.isIdent(&quot;tty&quot;) ||
        token.isIdent(&quot;tv&quot;)) {
      m.cssText += &quot; &quot; + token.value;
      m.medium = token.value;
      token = this.getToken(true, true);
    }
    else
      return null;
  }
  
  if (m.medium) {
    if (!token.isNotNull())
      return m;
    if (token.isIdent(&quot;and&quot;)) {
      m.cssText += &quot; and&quot;;
      token = this.getToken(true, true);
    }
    else if (!token.isSymbol(&quot;{&quot;))
      return null;
  }
  
  while (token.isSymbol(&quot;(&quot;)) {
    token = this.getToken(true, true);
    if (token.isIdent() &amp;&amp; (token.value in kCONSTRAINTS)) {
      var constraint = token.value;
      token = this.getToken(true, true);
      if (token.isSymbol(&quot;:&quot;)) {
        token = this.getToken(true, true);
        var values = [];
        while (!token.isSymbol(&quot;)&quot;)) {
          values.push(token.value);
          token = this.getToken(true, true);
        }
        if (token.isSymbol(&quot;)&quot;)) {
          m.constraints.push({constraint: constraint, value: values});
          m.cssText += &quot; (&quot; + constraint + &quot;: &quot; + values.join(&quot; &quot;) + &quot;)&quot;;
          token = this.getToken(true, true);
          if (token.isNotNull()) {
            if (token.isIdent(&quot;and&quot;)) {
              m.cssText += &quot; and&quot;;
              token = this.getToken(true, true);
            }
            else if (!token.isSymbol(&quot;{&quot;))
              return null;
          }
          else
            return m;
        }
        else
          return null;
      }
      else if (token.isSymbol(&quot;)&quot;)) {
        m.constraints.push({constraint: constraint, value: null});
        m.cssText += &quot; (&quot; + constraint + &quot;)&quot;;
        token = this.getToken(true, true);
        if (token.isNotNull()) {
          if (token.isIdent(&quot;and&quot;)) {
            m.cssText += &quot; and&quot;;
            token = this.getToken(true, true);
          }
          else
            return null;
        }
        else
          return m;
      }
      else
        return null;
    }
    else
      return null;
  }
  return m;
};

CSSParser.prototype.parseMediaRule = function(aToken, aSheet) {
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  var s = aToken.value;
  var valid = false;
  var mediaRule = new jscsspMediaRule();
  mediaRule.currentLine = currentLine;
  this.preserveState();
  var token = this.getToken(true, true);
  var foundMedia = false;
  while (token.isNotNull()) {
    this.ungetToken();
    var mediaQuery = this.parseMediaQuery();
    token = this.currentToken();
    if (mediaQuery) {
      foundMedia = true;
      s += &quot; &quot; + mediaQuery.cssText;
      mediaRule.media.push(mediaQuery.cssText);
      if (token.isSymbol(&quot;,&quot;)) {
        s += &quot;,&quot;;
      } else {
        if (token.isSymbol(&quot;{&quot;))
          break;
        else {
          // error...
          token.type = jscsspToken.NULL_TYPE;
          break;
        }
      }
    }
    else if (token.isSymbol(&quot;{&quot;))
      break;
    else if (foundMedia) {
      token.type = jscsspToken.NULL_TYPE;
      // not a media list
      break;
    }
    
    token = this.getToken(true, true);
  }
  if (token.isSymbol(&quot;{&quot;) &amp;&amp; mediaRule.media.length) {
    // ok let&#x27;s parse style rules now...
    s += &quot; { &quot;;
    token = this.getToken(true, false);
    while (token.isNotNull()) {
      if (token.isComment()) {
        if (this.mPreserveComments) {
          s += &quot; &quot; + token.value;
          var comment = new jscsspComment();
          comment.parsedCssText = token.value;
          mediaRule.cssRules.push(comment);
        }
      } else if (token.isSymbol(&quot;}&quot;)) {
        valid = true;
        break;
      } else {
        var r = this.parseStyleRule(token, mediaRule, true);
        if (r)
          s += r;
      }
      token = this.getToken(true, false);
    }
  }
  if (valid) {
    this.forgetState();
    mediaRule.parsedCssText = s;
    aSheet.cssRules.push(mediaRule);
    return true;
  }
  this.restoreState();
  return false;
};

CSSParser.prototype.parseNamespaceRule = function(aToken, aSheet) {
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  var s = aToken.value;
  var valid = false;
  this.preserveState();
  var token = this.getToken(true, true);
  if (token.isNotNull()) {
    var prefix = &quot;&quot;;
    var url = &quot;&quot;;
    if (token.isIdent()) {
      prefix = token.value;
      s += &quot; &quot; + prefix;
      token = this.getToken(true, true);
    }
    if (token) {
      var foundURL = false;
      if (token.isString()) {
        foundURL = true;
        url = token.value;
        s += &quot; &quot; + url;
      } else if (token.isFunction(&quot;url(&quot;)) {
        // get a url here...
        token = this.getToken(true, true);
        var urlContent = this.parseURL(token);
        if (urlContent) {
          url += &quot;url(&quot; + urlContent;
          foundURL = true;
          s += &quot; &quot; + urlContent;
        }
      }
    }
    if (foundURL) {
      token = this.getToken(true, true);
      if (token.isSymbol(&quot;;&quot;)) {
        s += &quot;;&quot;;
        this.forgetState();
        var rule = new jscsspNamespaceRule();
        rule.currentLine = currentLine;
        rule.parsedCssText = s;
        rule.prefix = prefix;
        rule.url = url;
        rule.parentStyleSheet = aSheet;
        aSheet.cssRules.push(rule);
        return true;
      }
    }
    
  }
  this.restoreState();
  this.addUnknownAtRule(aSheet, &quot;@namespace&quot;);
  return false;
};

CSSParser.prototype.parsePageRule = function(aToken, aSheet) {
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  var s = aToken.value;
  var valid = false;
  var declarations = [];
  this.preserveState();
  var token = this.getToken(true, true);
  var pageSelector = &quot;&quot;;
  if (token.isSymbol(&quot;:&quot;) || token.isIdent()) {
    if (token.isSymbol(&quot;:&quot;)) {
      pageSelector = &quot;:&quot;;
      token = this.getToken(false, false);
    }
    if (token.isIdent()) {
      pageSelector += token.value;
      s += &quot; &quot; + pageSelector;
      token = this.getToken(true, true);
    }
  }
  if (token.isNotNull()) {
    // expecting block start
    if (token.isSymbol(&quot;{&quot;)) {
      s += &quot; &quot; + token.value;
      var token = this.getToken(true, false);
      while (true) {
        if (token.isSymbol(&quot;}&quot;)) {
          s += &quot;}&quot;;
          valid = true;
          break;
        } else {
          var d = this.parseDeclaration(token, declarations, true, true, aSheet);
          s += ((d &amp;&amp; declarations.length) ? &quot; &quot; : &quot;&quot;) + d;
        }
        token = this.getToken(true, false);
      }
    }
  }
  if (valid) {
    this.forgetState();
    var rule = new jscsspPageRule();
    rule.currentLine = currentLine;
    rule.parsedCssText = s;
    rule.pageSelector = pageSelector;
    rule.declarations = declarations;
    rule.parentStyleSheet = aSheet;
    aSheet.cssRules.push(rule)
    return true;
  }
  this.restoreState();
  return false;
};

CSSParser.prototype.parsePauseShorthand = function(token, declarations, aAcceptPriority)
{
  var before = &quot;&quot;;
  var after = &quot;&quot;;
  
  var values = [];
  var values = [];
  while (true) {
    
    if (!token.isNotNull())
      break;
    
    if (token.isSymbol(&quot;;&quot;)
        || (aAcceptPriority &amp;&amp; token.isSymbol(&quot;!&quot;))
        || token.isSymbol(&quot;}&quot;)) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    else if (!values.length &amp;&amp; token.isIdent(this.kINHERIT)) {
      values.push(token.value);
    }
    
    else if (token.isDimensionOfUnit(&quot;ms&quot;)
             || token.isDimensionOfUnit(&quot;s&quot;)
             || token.isPercentage()
             || token.isNumber(&quot;0&quot;))
      values.push(token.value);
    else
      return &quot;&quot;;
    
    token = this.getToken(true, true);
  }
  
  var count = values.length;
  switch (count) {
    case 1:
      before = values[0];
      after = before;
      break;
    case 2:
      before = values[0];
      after = values[1];
      break;
    default:
      return &quot;&quot;;
  }
  this.forgetState();
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;pause-before&quot;, before));
  aDecl.push(this._createJscsspDeclarationFromValue(&quot;pause-after&quot;, after));
  return before + &quot; &quot; + after;
};

CSSParser.prototype.parseDefaultPropertyValue = function(token, aDecl, aAcceptPriority, descriptor, aSheet) {
  var valueText = &quot;&quot;;
  var blocks = [];
  var foundPriority = false;
  var values = [];
  while (token.isNotNull()) {
    
    if ((token.isSymbol(&quot;;&quot;)
         || token.isSymbol(&quot;}&quot;)
         || token.isSymbol(&quot;!&quot;))
        &amp;&amp; !blocks.length) {
      if (token.isSymbol(&quot;}&quot;))
        this.ungetToken();
      break;
    }
    
    if (token.isIdent(this.kINHERIT)) {
      if (values.length) {
        return &quot;&quot;;
      }
      else {
        valueText = this.kINHERIT;
        var value = new jscsspVariable(kJscsspINHERIT_VALUE, aSheet);
        values.push(value);
        token = this.getToken(true, true);
        break;
      }
    }
    else if (token.isSymbol(&quot;{&quot;)
             || token.isSymbol(&quot;(&quot;)
             || token.isSymbol(&quot;[&quot;)) {
      blocks.push(token.value);
    }
    else if (token.isSymbol(&quot;}&quot;)
             || token.isSymbol(&quot;]&quot;)) {
      if (blocks.length) {
        var ontop = blocks[blocks.length - 1];
        if ((token.isSymbol(&quot;}&quot;) &amp;&amp; ontop == &quot;{&quot;)
            || (token.isSymbol(&quot;)&quot;) &amp;&amp; ontop == &quot;(&quot;)
            || (token.isSymbol(&quot;]&quot;) &amp;&amp; ontop == &quot;[&quot;)) {
          blocks.pop();
        }
      }
    }
    // XXX must find a better way to store individual values
    // probably a |values: []| field holding dimensions, percentages
    // functions, idents, numbers and symbols, in that order.
    if (token.isFunction()) {
      if (token.isFunction(&quot;var(&quot;)) {
        token = this.getToken(true, true);
        if (token.isIdent()) {
          var name = token.value;
          token = this.getToken(true, true);
          if (token.isSymbol(&quot;)&quot;)) {
            var value = new jscsspVariable(kJscsspVARIABLE_VALUE, aSheet);
            valueText += &quot;var(&quot; + name + &quot;)&quot;;
            value.name = name;
            values.push(value);
          }
          else
            return &quot;&quot;;
        }
        else
          return &quot;&quot;;
      }
      else {
        var fn = token.value;
        token = this.getToken(false, true);
        var arg = this.parseFunctionArgument(token);
        if (arg) {
          valueText += fn + arg;
          var value = new jscsspVariable(kJscsspPRIMITIVE_VALUE, aSheet);
          value.value = fn + arg;
          values.push(value);
        }
        else
          return &quot;&quot;;
      }
    }
    else if (token.isSymbol(&quot;#&quot;)) {
      var color = this.parseColor(token);
      if (color) {
        valueText += color;
        var value = new jscsspVariable(kJscsspPRIMITIVE_VALUE, aSheet);
        value.value = color;
        values.push(value);
      }
      else
        return &quot;&quot;;
    }
    else if (!token.isWhiteSpace() &amp;&amp; !token.isSymbol(&quot;,&quot;)) {
      var value = new jscsspVariable(kJscsspPRIMITIVE_VALUE, aSheet);
      value.value = token.value;
      values.push(value);
      valueText += token.value;
    }
    else
      valueText += token.value;
    token = this.getToken(false, true);
  }
  if (values.length &amp;&amp; valueText) {
    this.forgetState();
    aDecl.push(this._createJscsspDeclarationFromValuesArray(descriptor, values, valueText));
    return valueText;
  }
  return &quot;&quot;;
};

CSSParser.prototype.parseSelector = function(aToken, aParseSelectorOnly) {
  var s = &quot;&quot;;
  var specificity = {a: 0, b: 0, c: 0, d: 0}; // CSS 2.1 section 6.4.3
  var isFirstInChain = true;
  var token = aToken;
  var valid = false;
  var combinatorFound = false;
  while (true) {
    if (!token.isNotNull()) {
      if (aParseSelectorOnly)
        return {selector: s, specificity: specificity };
      return &quot;&quot;;
    }
    
    if (!aParseSelectorOnly &amp;&amp; token.isSymbol(&quot;{&quot;)) {
      // end of selector
      valid = !combinatorFound;
      // don&#x27;t unget if invalid since addUnknownRule is going to restore state anyway
      if (valid)
        this.ungetToken();
      break;
    }
    
    if (token.isSymbol(&quot;,&quot;)) { // group of selectors
      s += token.value;
      isFirstInChain = true;
      combinatorFound = false;
      token = this.getToken(false, true);
      continue;
    }
    // now combinators and grouping...
    else if (!combinatorFound
             &amp;&amp; (token.isWhiteSpace()
                 || token.isSymbol(&quot;&gt;&quot;)
                 || token.isSymbol(&quot;+&quot;)
                 || token.isSymbol(&quot;~&quot;))) {
               if (token.isWhiteSpace()) {
                 s += &quot; &quot;;
                 var nextToken = this.lookAhead(true, true);
                 if (!nextToken.isNotNull()) {
                   if (aParseSelectorOnly)
                     return {selector: s, specificity: specificity };
                   return &quot;&quot;;
                 }
                 if (nextToken.isSymbol(&quot;&gt;&quot;)
                     || nextToken.isSymbol(&quot;+&quot;)
                     || nextToken.isSymbol(&quot;~&quot;)) {
                   token = this.getToken(true, true);
                   s += token.value + &quot; &quot;;
                   combinatorFound = true;
                 }
               }
               else {
                 s += token.value;
                 combinatorFound = true;
               }
               isFirstInChain = true;
               token = this.getToken(true, true);
               continue;
             }
    else {
      var simpleSelector = this.parseSimpleSelector(token, isFirstInChain, true);
      if (!simpleSelector)
        break; // error
      s += simpleSelector.selector;
      specificity.b += simpleSelector.specificity.b;
      specificity.c += simpleSelector.specificity.c;
      specificity.d += simpleSelector.specificity.d;
      isFirstInChain = false;
      combinatorFound = false;
    }
    
    token = this.getToken(false, true);
  }
  
  if (valid) {
    return {selector: s, specificity: specificity };
  }
  return &quot;&quot;;
};

CSSParser.prototype.isPseudoElement = function(aIdent)
{
  switch (aIdent) {
    case &quot;first-letter&quot;:
    case &quot;first-line&quot;:
    case &quot;before&quot;:
    case &quot;after&quot;:
    case &quot;marker&quot;:
      return true;
      break;
    default: 
      break;
  }
  return false;
};

CSSParser.prototype.parseSimpleSelector = function(token, isFirstInChain, canNegate)
{
  var s = &quot;&quot;;
  var specificity = {a: 0, b: 0, c: 0, d: 0}; // CSS 2.1 section 6.4.3
  
  if (isFirstInChain
      &amp;&amp; (token.isSymbol(&quot;*&quot;) || token.isSymbol(&quot;|&quot;) || token.isIdent())) {
    // type or universal selector
    if (token.isSymbol(&quot;*&quot;) || token.isIdent()) {
      // we don&#x27;t know yet if it&#x27;s a prefix or a universal
      // selector
      s += token.value;
      var isIdent = token.isIdent();
      token = this.getToken(false, true);
      if (token.isSymbol(&quot;|&quot;)) {
        // it&#x27;s a prefix
        s += token.value;
        token = this.getToken(false, true);
        if (token.isIdent() || token.isSymbol(&quot;*&quot;)) {
          // ok we now have a type element or universal
          // selector
          s += token.value;
          if (token.isIdent())
            specificity.d++;
        } else
          // oops that&#x27;s an error...
          return null;
      } else {
        this.ungetToken();
        if (isIdent)
          specificity.d++;
      }
    } else if (token.isSymbol(&quot;|&quot;)) {
      s += token.value;
      token = this.getToken(false, true);
      if (token.isIdent() || token.isSymbol(&quot;*&quot;)) {
        s += token.value;
        if (token.isIdent())
          specificity.d++;
      } else
        // oops that&#x27;s an error
        return null;
    }
  }
  
  else if (token.isSymbol(&quot;.&quot;) || token.isSymbol(&quot;#&quot;)) {
    var isClass = token.isSymbol(&quot;.&quot;);
    s += token.value;
    token = this.getToken(false, true);
    if (token.isIdent()) {
      s += token.value;
      if (isClass)
        specificity.c++;
      else
        specificity.b++;
    }
    else
      return null;
  }
  
  else if (token.isSymbol(&quot;:&quot;)) {
    s += token.value;
    token = this.getToken(false, true);
    if (token.isSymbol(&quot;:&quot;)) {
      s += token.value;
      token = this.getToken(false, true);
    }
    if (token.isIdent()) {
      s += token.value;
      if (this.isPseudoElement(token.value))
        specificity.d++;
      else
        specificity.c++;
    }
    else if (token.isFunction()) {
      s += token.value;
      if (token.isFunction(&quot;:not(&quot;)) {
        if (!canNegate)
          return null;
        token = this.getToken(true, true);
        var simpleSelector = this.parseSimpleSelector(token, isFirstInChain, false);
        if (!simpleSelector)
          return null;
        else {
          s += simpleSelector.selector;
          token = this.getToken(true, true);
          if (token.isSymbol(&quot;)&quot;))
            s += &quot;)&quot;;
          else
            return null;
        }
        specificity.c++;
      }
      else {
        while (true) {
          token = this.getToken(false, true);
          if (token.isSymbol(&quot;)&quot;)) {
            s += &quot;)&quot;;
            break;
          } else
            s += token.value;
        }
        specificity.c++;
      }
    } else
      return null;
    
  } else if (token.isSymbol(&quot;[&quot;)) {
    s += &quot;[&quot;;
    token = this.getToken(true, true);
    if (token.isIdent() || token.isSymbol(&quot;*&quot;)) {
      s += token.value;
      var nextToken = this.getToken(true, true);
      if (nextToken.isSymbol(&quot;|&quot;)) {
        s += &quot;|&quot;;
        token = this.getToken(true, true);
        if (token.isIdent())
          s += token.value;
        else
          return null;
      } else
        this.ungetToken();
    } else if (token.isSymbol(&quot;|&quot;)) {
      s += &quot;|&quot;;
      token = this.getToken(true, true);
      if (token.isIdent())
        s += token.value;
      else
        return null;
    }
    else
      return null;
    
    // nothing, =, *=, $=, ^=, |=
    token = this.getToken(true, true);
    if (token.isIncludes()
        || token.isDashmatch()
        || token.isBeginsmatch()
        || token.isEndsmatch()
        || token.isContainsmatch()
        || token.isSymbol(&quot;=&quot;)) {
      s += token.value;
      token = this.getToken(true, true);
      if (token.isString() || token.isIdent()) {
        s += token.value;
        token = this.getToken(true, true);
      }
      else
        return null;
      
      if (token.isSymbol(&quot;]&quot;)) {
        s += token.value;
        specificity.c++;
      }
      else
        return null;
    }
    else if (token.isSymbol(&quot;]&quot;)) {
      s += token.value;
      specificity.c++;
    }
    else
      return null;
    
  }
  else if (token.isWhiteSpace()) {
    var t = this.lookAhead(true, true);
    if (t.isSymbol(&#x27;{&#x27;))
      return &quot;&quot;
      }
  if (s)
    return {selector: s, specificity: specificity };
  return null;
};

CSSParser.prototype.trim11 = function(str) {
  str = str.replace(/^\s+/, &#x27;&#x27;);
  for (var i = str.length - 1; i &gt;= 0; i--) {
    if (/\S/.test( str.charAt(i) )) { // XXX charat
      str = str.substring(0, i + 1);
      break;
    }
  }
  return str;
};

CSSParser.prototype.parseStyleRule = function(aToken, aOwner, aIsInsideMediaRule)
{
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  this.preserveState();
  // first let&#x27;s see if we have a selector here...
  var selector = this.parseSelector(aToken, false);
  var valid = false;
  var declarations = [];
  if (selector) {
    selector = this.trim11(selector.selector);
    var s = selector;
    var token = this.getToken(true, true);
    if (token.isSymbol(&quot;{&quot;)) {
      s += &quot; { &quot;;
      var token = this.getToken(true, false);
      while (true) {
        if (!token.isNotNull()) {
          valid = true;
          break;
        }
        if (token.isSymbol(&quot;}&quot;)) {
          s += &quot;}&quot;;
          valid = true;
          break;
        } else {
          var d = this.parseDeclaration(token, declarations, true, true, aOwner);
          s += ((d &amp;&amp; declarations.length) ? &quot; &quot; : &quot;&quot;) + d;
        }
        token = this.getToken(true, false);
      }
    }
  }
  else {
    // selector is invalid so the whole rule is invalid with it
  }
  
  if (valid) {
    var rule = new jscsspStyleRule();
    rule.currentLine = currentLine;
    rule.parsedCssText = s;
    rule.declarations = declarations;
    rule.mSelectorText = selector;
    if (aIsInsideMediaRule)
      rule.parentRule = aOwner;
    else
      rule.parentStyleSheet = aOwner;
    aOwner.cssRules.push(rule);
    return s;
  }
  this.restoreState();
  s = this.currentToken().value;
  this.addUnknownAtRule(aOwner, s);
  return &quot;&quot;;
};

CSSParser.prototype.parseTextShadows = function()
{
  var shadows = [];
  var token = this.getToken(true, true);
  var color = &quot;&quot;, blurRadius = &quot;0px&quot;, offsetX = &quot;0px&quot;, offsetY = &quot;0px&quot;; 
  while (token.isNotNull()) {
    if (token.isIdent(&quot;none&quot;)) {
      shadows.push( { none: true } );
      token = this.getToken(true, true);
    }
    else {
      if (token.isFunction(&quot;rgb(&quot;) ||
          token.isFunction(&quot;rgba(&quot;) ||
          token.isFunction(&quot;hsl(&quot;) ||
          token.isFunction(&quot;hsla(&quot;) ||
          token.isSymbol(&quot;#&quot;) ||
          token.isIdent()) {
        var color = this.parseColor(token);
        token = this.getToken(true, true);
      }
      if (token.isPercentage() ||
          token.isDimensionOfUnit(&quot;cm&quot;) ||
          token.isDimensionOfUnit(&quot;mm&quot;) ||
          token.isDimensionOfUnit(&quot;in&quot;) ||
          token.isDimensionOfUnit(&quot;pc&quot;) ||
          token.isDimensionOfUnit(&quot;px&quot;) ||
          token.isDimensionOfUnit(&quot;em&quot;) ||
          token.isDimensionOfUnit(&quot;ex&quot;) ||
          token.isDimensionOfUnit(&quot;pt&quot;)) {
        var offsetX = token.value;
        token = this.getToken(true, true);
      }
      else
        return [];
      if (token.isPercentage() ||
          token.isDimensionOfUnit(&quot;cm&quot;) ||
          token.isDimensionOfUnit(&quot;mm&quot;) ||
          token.isDimensionOfUnit(&quot;in&quot;) ||
          token.isDimensionOfUnit(&quot;pc&quot;) ||
          token.isDimensionOfUnit(&quot;px&quot;) ||
          token.isDimensionOfUnit(&quot;em&quot;) ||
          token.isDimensionOfUnit(&quot;ex&quot;) ||
          token.isDimensionOfUnit(&quot;pt&quot;)) {
        var offsetY = token.value;
        token = this.getToken(true, true);
      }
      else
        return [];
      if (token.isPercentage() ||
          token.isDimensionOfUnit(&quot;cm&quot;) ||
          token.isDimensionOfUnit(&quot;mm&quot;) ||
          token.isDimensionOfUnit(&quot;in&quot;) ||
          token.isDimensionOfUnit(&quot;pc&quot;) ||
          token.isDimensionOfUnit(&quot;px&quot;) ||
          token.isDimensionOfUnit(&quot;em&quot;) ||
          token.isDimensionOfUnit(&quot;ex&quot;) ||
          token.isDimensionOfUnit(&quot;pt&quot;)) {
        var blurRadius = token.value;
        token = this.getToken(true, true);
      }
      if (!color &amp;&amp;
          (token.isFunction(&quot;rgb(&quot;) ||
           token.isFunction(&quot;rgba(&quot;) ||
           token.isFunction(&quot;hsl(&quot;) ||
           token.isFunction(&quot;hsla(&quot;) ||
           token.isSymbol(&quot;#&quot;) ||
           token.isIdent())) {
            var color = this.parseColor(token);
            token = this.getToken(true, true);
          }
      
      shadows.push( { none: false,
                   color: color,
                   offsetX: offsetX, offsetY: offsetY,
                   blurRadius: blurRadius } );
      
      if (token.isSymbol(&quot;,&quot;)) {
        color = &quot;&quot;;
        blurRadius = &quot;0px&quot;;
        offsetX = &quot;0px&quot;;
        offsetY = &quot;0px&quot;; 
        token = this.getToken(true, true);
      }
      else if (!token.isNotNull())
        return shadows;
      else
        return [];
    }
  }
  return shadows;
};

CSSParser.prototype.currentToken = function() {
  return this.mToken;
};

CSSParser.prototype.getHexValue = function() {
  this.mToken = this.mScanner.nextHexValue();
  return this.mToken;
};

CSSParser.prototype.getToken = function(aSkipWS, aSkipComment) {
  if (this.mLookAhead) {
    this.mToken = this.mLookAhead;
    this.mLookAhead = null;
    return this.mToken;
  }
  
  this.mToken = this.mScanner.nextToken();
  while (this.mToken &amp;&amp;
         ((aSkipWS &amp;&amp; this.mToken.isWhiteSpace()) ||
          (aSkipComment &amp;&amp; this.mToken.isComment())))
    this.mToken = this.mScanner.nextToken();
  return this.mToken;
};

CSSParser.prototype.lookAhead = function(aSkipWS, aSkipComment) {
  var preservedToken = this.mToken;
  this.mScanner.preserveState();
  var token = this.getToken(aSkipWS, aSkipComment);
  this.mScanner.restoreState();
  this.mToken = preservedToken;
  
  return token;
};

CSSParser.prototype.ungetToken = function() {
  this.mLookAhead = this.mToken;
};

CSSParser.prototype.addWhitespace = function(aSheet, aString) {
  var rule = new jscsspWhitespace();
  rule.parsedCssText = aString;
  rule.parentStyleSheet = aSheet;
  aSheet.cssRules.push(rule);
};

CSSParser.prototype.addComment = function(aSheet, aString) {
  var rule = new jscsspComment();
  rule.parsedCssText = aString;
  rule.parentStyleSheet = aSheet;
  aSheet.cssRules.push(rule);
};

CSSParser.prototype._createJscsspDeclaration = function(property, value)
{
  var decl = new jscsspDeclaration();
  decl.property = property;
  decl.value = this.trim11(value);
  decl.parsedCssText = property + &quot;: &quot; + value + &quot;;&quot;;
  return decl;
};

CSSParser.prototype._createJscsspDeclarationFromValue = function(property, valueText)
{
  var decl = new jscsspDeclaration();
  decl.property = property;
  var value = new jscsspVariable(kJscsspPRIMITIVE_VALUE, null);
  value.value = valueText;
  decl.values = [value];
  decl.valueText = valueText;
  decl.parsedCssText = property + &quot;: &quot; + valueText + &quot;;&quot;;
  return decl;
};

CSSParser.prototype._createJscsspDeclarationFromValuesArray = function(property, values, valueText)
{
  var decl = new jscsspDeclaration();
  decl.property = property;
  decl.values = values;
  decl.valueText = valueText;
  decl.parsedCssText = property + &quot;: &quot; + valueText + &quot;;&quot;;
  return decl;
};

CSSParser.prototype.preserveState = function() {
  this.mPreservedTokens.push(this.currentToken());
  this.mScanner.preserveState();
};

CSSParser.prototype.restoreState = function() {
  if (this.mPreservedTokens.length) {
    this.mScanner.restoreState();
    this.mToken = this.mPreservedTokens.pop();
  }
};

CSSParser.prototype.forgetState = function() {
  if (this.mPreservedTokens.length) {
    this.mScanner.forgetState();
    this.mPreservedTokens.pop();
  }
};

CSSParser.prototype.addUnknownAtRule = function(aSheet, aString) {
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  var blocks = [];
  var token = this.getToken(false, false);
  while (token.isNotNull()) {
    aString += token.value;
    if (token.isSymbol(&quot;;&quot;) &amp;&amp; !blocks.length)
      break;
    else if (token.isSymbol(&quot;{&quot;)
             || token.isSymbol(&quot;(&quot;)
             || token.isSymbol(&quot;[&quot;)
             || token.type == &quot;function&quot;) {
      blocks.push(token.isFunction() ? &quot;(&quot; : token.value);
    } else if (token.isSymbol(&quot;}&quot;)
               || token.isSymbol(&quot;)&quot;)
               || token.isSymbol(&quot;]&quot;)) {
      if (blocks.length) {
        var ontop = blocks[blocks.length - 1];
        if ((token.isSymbol(&quot;}&quot;) &amp;&amp; ontop == &quot;{&quot;)
            || (token.isSymbol(&quot;)&quot;) &amp;&amp; ontop == &quot;(&quot;)
            || (token.isSymbol(&quot;]&quot;) &amp;&amp; ontop == &quot;[&quot;)) {
          blocks.pop();
          if (!blocks.length &amp;&amp; token.isSymbol(&quot;}&quot;))
            break;
        }
      }
    }
    token = this.getToken(false, false);
  }
  
  this.addUnknownRule(aSheet, aString, currentLine);
};

CSSParser.prototype.addUnknownRule = function(aSheet, aString, aCurrentLine) {
  var errorMsg = this.consumeError();
  var rule = new jscsspErrorRule(errorMsg);
  rule.currentLine = aCurrentLine;
  rule.parsedCssText = aString;
  rule.parentStyleSheet = aSheet;
  aSheet.cssRules.push(rule);
};

CSSParser.prototype.parseURL = function(token)
{
  var value = &quot;&quot;;
  if (token.isString())
  {
    value += token.value;
    token = this.getToken(true, true);
  }
  else
    while (true)
    {
      if (!token.isNotNull()) {
        this.reportError(kURL_EOF);
        return &quot;&quot;;
      }
      if (token.isWhiteSpace()) {
        nextToken = this.lookAhead(true, true);
        // if next token is not a closing parenthesis, that&#x27;s an error
        if (!nextToken.isSymbol(&quot;)&quot;)) {
          this.reportError(kURL_WS_INSIDE);
          token = this.currentToken();
          break;
        }
      }
      if (token.isSymbol(&quot;)&quot;)) {
        break;
      }
      value += token.value;
      token = this.getToken(false, false);
    }
  
  if (token.isSymbol(&quot;)&quot;)) {
    return value + &quot;)&quot;;
  }
  return &quot;&quot;;
};

CSSParser.prototype.parseVariablesRule = function(token, aSheet) {
  var currentLine = CountLF(this.mScanner.getAlreadyScanned());
  var s = token.value;
  var declarations = [];
  var valid = false;
  this.preserveState();
  token = this.getToken(true, true);
  var media = [];
  var foundMedia = false;
  while (token.isNotNull()) {
    if (token.isIdent()) {
      foundMedia = true;
      s += &quot; &quot; + token.value;
      media.push(token.value);
      token = this.getToken(true, true);
      if (token.isSymbol(&quot;,&quot;)) {
        s += &quot;,&quot;;
      } else {
        if (token.isSymbol(&quot;{&quot;))
          this.ungetToken();
        else {
          // error...
          token.type = jscsspToken.NULL_TYPE;
          break;
        }
      }
    } else if (token.isSymbol(&quot;{&quot;))
      break;
    else if (foundMedia) {
      token.type = jscsspToken.NULL_TYPE;
      // not a media list
      break;
    }
    token = this.getToken(true, true);
  }
  
  if (token.isSymbol(&quot;{&quot;)) {
    s += &quot; {&quot;;
    token = this.getToken(true, true);
    while (true) {
      if (!token.isNotNull()) {
        valid = true;
        break;
      }
      if (token.isSymbol(&quot;}&quot;)) {
        s += &quot;}&quot;;
        valid = true;
        break;
      } else {
        var d = this.parseDeclaration(token, declarations, true, false, aSheet);
        s += ((d &amp;&amp; declarations.length) ? &quot; &quot; : &quot;&quot;) + d;
      }
      token = this.getToken(true, false);
    }
  }
  if (valid) {
    this.forgetState();
    var rule = new jscsspVariablesRule();
    rule.currentLine = currentLine;
    rule.parsedCssText = s;
    rule.declarations = declarations;
    rule.media = media;
    rule.parentStyleSheet = aSheet;
    aSheet.cssRules.push(rule)
    return true;
  }
  this.restoreState();
  return false;
};

function jscsspToken(aType, aValue, aUnit)
{
  this.type = aType;
  this.value = aValue;
  this.unit = aUnit;
}

jscsspToken.NULL_TYPE = 0;

jscsspToken.WHITESPACE_TYPE = 1;
jscsspToken.STRING_TYPE = 2;
jscsspToken.COMMENT_TYPE = 3;
jscsspToken.NUMBER_TYPE = 4;
jscsspToken.IDENT_TYPE = 5;
jscsspToken.FUNCTION_TYPE = 6;
jscsspToken.ATRULE_TYPE = 7;
jscsspToken.INCLUDES_TYPE = 8;
jscsspToken.DASHMATCH_TYPE = 9;
jscsspToken.BEGINSMATCH_TYPE = 10;
jscsspToken.ENDSMATCH_TYPE = 11;
jscsspToken.CONTAINSMATCH_TYPE = 12;
jscsspToken.SYMBOL_TYPE = 13;
jscsspToken.DIMENSION_TYPE = 14;
jscsspToken.PERCENTAGE_TYPE = 15;
jscsspToken.HEX_TYPE = 16;

jscsspToken.prototype = {

  isNotNull: function ()
  {
    return this.type;
  },

  _isOfType: function (aType, aValue)
  {
    return (this.type == aType &amp;&amp; (!aValue || this.value.toLowerCase() == aValue));
  },

  isWhiteSpace: function(w)
  {
    return this._isOfType(jscsspToken.WHITESPACE_TYPE, w);
  },

  isString: function()
  {
    return this._isOfType(jscsspToken.STRING_TYPE);
  },

  isComment: function()
  {
    return this._isOfType(jscsspToken.COMMENT_TYPE);
  },

  isNumber: function(n)
  {
    return this._isOfType(jscsspToken.NUMBER_TYPE, n);
  },

  isIdent: function(i)
  {
    return this._isOfType(jscsspToken.IDENT_TYPE, i);
  },

  isFunction: function(f)
  {
    return this._isOfType(jscsspToken.FUNCTION_TYPE, f);
  },

  isAtRule: function(a)
  {
    return this._isOfType(jscsspToken.ATRULE_TYPE, a);
  },

  isIncludes: function()
  {
    return this._isOfType(jscsspToken.INCLUDES_TYPE);
  },

  isDashmatch: function()
  {
    return this._isOfType(jscsspToken.DASHMATCH_TYPE);
  },

  isBeginsmatch: function()
  {
    return this._isOfType(jscsspToken.BEGINSMATCH_TYPE);
  },

  isEndsmatch: function()
  {
    return this._isOfType(jscsspToken.ENDSMATCH_TYPE);
  },

  isContainsmatch: function()
  {
    return this._isOfType(jscsspToken.CONTAINSMATCH_TYPE);
  },

  isSymbol: function(c)
  {
    return this._isOfType(jscsspToken.SYMBOL_TYPE, c);
  },

  isDimension: function()
  {
    return this._isOfType(jscsspToken.DIMENSION_TYPE);
  },

  isPercentage: function()
  {
    return this._isOfType(jscsspToken.PERCENTAGE_TYPE);
  },

  isHex: function()
  {
    return this._isOfType(jscsspToken.HEX_TYPE);
  },

  isDimensionOfUnit: function(aUnit)
  {
    return (this.isDimension() &amp;&amp; this.unit == aUnit);
  },

  isLength: function()
  {
    return (this.isPercentage() ||
            this.isDimensionOfUnit(&quot;cm&quot;) ||
            this.isDimensionOfUnit(&quot;mm&quot;) ||
            this.isDimensionOfUnit(&quot;in&quot;) ||
            this.isDimensionOfUnit(&quot;pc&quot;) ||
            this.isDimensionOfUnit(&quot;px&quot;) ||
            this.isDimensionOfUnit(&quot;em&quot;) ||
            this.isDimensionOfUnit(&quot;ex&quot;) ||
            this.isDimensionOfUnit(&quot;pt&quot;));
  },

  isAngle: function()
  {
    return (this.isDimensionOfUnit(&quot;deg&quot;) ||
            this.isDimensionOfUnit(&quot;rad&quot;) ||
            this.isDimensionOfUnit(&quot;grad&quot;));
  }
}

/* kJscsspCHARSET_RULE */

function jscsspCharsetRule()
{
  this.type = kJscsspCHARSET_RULE;
  this.encoding = null;
  this.parsedCssText = null;
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspCharsetRule.prototype = {

  cssText: function() {
    return &quot;@charset &quot; + this.encoding + &quot;;&quot;;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    if (parser.parseCharsetRule(sheet)) {
      var newRule = sheet.cssRules[0];
      this.encoding = newRule.encoding;
      this.parsedCssText = newRule.parsedCssText;
      return;
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspCOMMENT */

function jscsspComment()
{
  this.type = kJscsspCOMMENT;
  this.parsedCssText = null;
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspComment.prototype = {
  cssText: function() {
    return this.parsedCssText;
  },

  setCssText: function(val) {
    var parser = new CSSParser(val);
    var token = parser.getToken(true, false);
    if (token.isComment())
      this.parsedCssText = token.value;
    else
      throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspSTYLE_DECLARATION */

function jscsspDeclaration()
{
  this.type = kJscsspSTYLE_DECLARATION;
  this.property = null;
  this.values = [];
  this.valueText = null;
  this.priority = null;
  this.parsedCssText = null;
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspDeclaration.prototype = {
  kCOMMA_SEPARATED: {
    &quot;cursor&quot;: true,
    &quot;font-family&quot;: true,
    &quot;voice-family&quot;: true,
    &quot;background-image&quot;: true
  },

  kUNMODIFIED_COMMA_SEPARATED_PROPERTIES: {
    &quot;text-shadow&quot;: true,
    &quot;box-shadow&quot;: true,
    &quot;-moz-transition&quot;: true,
    &quot;-moz-transition-property&quot;: true,
    &quot;-moz-transition-duration&quot;: true,
    &quot;-moz-transition-timing-function&quot;: true,
    &quot;-moz-transition-delay&quot;: true,
    &quot;src&quot;: true,
    &quot;-moz-font-feature-settings&quot;: true
  },

  cssText: function() {
    var prefixes = PrefixHelper.prefixesForProperty(this.property);

    var rv = &quot;&quot;;
    if (this.property in this.kUNMODIFIED_COMMA_SEPARATED_PROPERTIES) {
      if (prefixes) {
        rv = &quot;&quot;;
        for (var propertyIndex = 0; propertyIndex &lt; prefixes.length; propertyIndex++) {
          var property = prefixes[propertyIndex];
          rv += (propertyIndex ? gTABS : &quot;&quot;) + property + &quot;: &quot;;
          rv += this.valueText + (this.priority ? &quot; !important&quot; : &quot;&quot;) + &quot;;&quot;;
          rv += ((prefixes.length &gt; 1 &amp;&amp; propertyIndex != prefixes.length -1) ? &quot;\n&quot; : &quot;&quot;);
        }
        return rv;
      }
      return this.property + &quot;: &quot; + this.valueText +
             (this.priority ? &quot; !important&quot; : &quot;&quot;) + &quot;;&quot;
    }

    if (prefixes) {
      rv = &quot;&quot;;
      for (var propertyIndex = 0; propertyIndex &lt; prefixes.length; propertyIndex++) {
        var property = prefixes[propertyIndex];
        rv += (propertyIndex ? gTABS : &quot;&quot;) + property + &quot;: &quot;;
        var separator = (property in this.kCOMMA_SEPARATED) ? &quot;, &quot; : &quot; &quot;;
        for (var i = 0; i &lt; this.values.length; i++)
          if (this.values[i].cssText() != null)
            rv += (i ? separator : &quot;&quot;) + this.values[i].cssText();
          else
            return null;
        rv += (this.priority ? &quot; !important&quot; : &quot;&quot;) + &quot;;&quot; +
              ((prefixes.length &gt; 1 &amp;&amp; propertyIndex != prefixes.length -1) ? &quot;\n&quot; : &quot;&quot;);
      }
      return rv;
    }

    var separator = (this.property in this.kCOMMA_SEPARATED) ? &quot;, &quot; : &quot; &quot;;
    var extras = {&quot;webkit&quot;: false, &quot;presto&quot;: false, &quot;trident&quot;: false, &quot;gecko1.9.2&quot;: false, &quot;generic&quot;: false }
    for (var i = 0; i &lt; this.values.length; i++) {
      var v = this.values[i].cssText();
      if (v != null) {
        var paren = v.indexOf(&quot;(&quot;);
        var kwd = v;
        if (paren != -1)
          kwd = v.substr(0, paren);
        if (kwd in kCSS_VENDOR_VALUES) {
          for (var j in kCSS_VENDOR_VALUES[kwd]) {
            extras[j] = extras[j] || (kCSS_VENDOR_VALUES[kwd][j] != &quot;&quot;);
          }
        }
      }
      else
        return null;
    }

    for (var j in extras) {
      if (extras[j]) {
        var str = &quot;\n&quot; + gTABS +  this.property + &quot;: &quot;;
        for (var i = 0; i &lt; this.values.length; i++) {
          var v = this.values[i].cssText();
          if (v != null) {
            var paren = v.indexOf(&quot;(&quot;);
            var kwd = v;
            if (paren != -1)
              kwd = v.substr(0, paren);
            if (kwd in kCSS_VENDOR_VALUES) {
              functor = kCSS_VENDOR_VALUES[kwd][j];
              if (functor) {
                v = (typeof functor == &quot;string&quot;) ? functor : functor(v, j);
                if (!v) {
                  str = null;
                  break;
                }
              }
            }
            str += (i ? separator : &quot;&quot;) + v;
          }
          else
            return null;
        }
        if (str)
          rv += str + &quot;;&quot;
        else
          rv += &quot;\n&quot; + gTABS + &quot;/* Impossible to translate property &quot; + this.property + &quot; for &quot; + j + &quot; */&quot;;
      }
    }

    rv += &quot;\n&quot; + gTABS + this.property + &quot;: &quot;;
    for (var i = 0; i &lt; this.values.length; i++) {
      var v = this.values[i].cssText();
      if (v != null) {
        rv += (i ? separator : &quot;&quot;) + v;
      }
    }
    rv += (this.priority ? &quot; !important&quot; : &quot;&quot;) + &quot;;&quot;;

    return rv;
  },

  setCssText: function(val) {
    var declarations = [];
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (parser.parseDeclaration(token, declarations, true, true, null)
        &amp;&amp; declarations.length
        &amp;&amp; declarations[0].type == kJscsspSTYLE_DECLARATION) {
      var newDecl = declarations.cssRules[0];
      this.property = newDecl.property;
      this.value = newDecl.value;
      this.priority = newDecl.priority;
      this.parsedCssText = newRule.parsedCssText;
      return;
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspUNKNOWN_RULE */

function jscsspErrorRule(aErrorMsg)
{
  this.error = aErrorMsg ? aErrorMsg : &quot;INVALID&quot;; 
  this.type = kJscsspUNKNOWN_RULE;
  this.parsedCssText = null;
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspErrorRule.prototype = {
  cssText: function() {
    return this.parsedCssText;
  }
};

/* kJscsspFONT_FACE_RULE */

function jscsspFontFaceRule()
{
  this.type = kJscsspFONT_FACE_RULE;
  this.parsedCssText = null;
  this.descriptors = [];
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspFontFaceRule.prototype = {
  cssText: function() {
    var rv = gTABS + &quot;@font-face {\n&quot;;
    var preservedGTABS = gTABS;
    gTABS += &quot;  &quot;;
    for (var i = 0; i &lt; this.descriptors.length; i++)
      rv += gTABS + this.descriptors[i].cssText() + &quot;\n&quot;;
    gTABS = preservedGTABS;
    return rv + gTABS + &quot;}&quot;;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (token.isAtRule(&quot;@font-face&quot;)) {
      if (parser.parseFontFaceRule(token, sheet)) {
        var newRule = sheet.cssRules[0];
        this.descriptors = newRule.descriptors;
        this.parsedCssText = newRule.parsedCssText;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspIMPORT_RULE */

function jscsspImportRule()
{
  this.type = kJscsspIMPORT_RULE;
  this.parsedCssText = null;
  this.href = null;
  this.media = []; 
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspImportRule.prototype = {
  cssText: function() {
    var mediaString = this.media.join(&quot;, &quot;);
    return &quot;@import &quot; + this.href
                      + ((mediaString &amp;&amp; mediaString != &quot;all&quot;) ? mediaString + &quot; &quot; : &quot;&quot;)
                      + &quot;;&quot;;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (token.isAtRule(&quot;@import&quot;)) {
      if (parser.parseImportRule(token, sheet)) {
        var newRule = sheet.cssRules[0];
        this.href = newRule.href;
        this.media = newRule.media;
        this.parsedCssText = newRule.parsedCssText;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspKEYFRAME_RULE */
function jscsspKeyframeRule()
{
  this.type = kJscsspKEYFRAME_RULE;
  this.parsedCssText = null;
  this.declarations = []
  this.keyText = null;
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspKeyframeRule.prototype = {
  cssText: function() {
    var rv = this.keyText + &quot; {\n&quot;;
    var preservedGTABS = gTABS;
    gTABS += &quot;  &quot;;
    for (var i = 0; i &lt; this.declarations.length; i++) {
      var declText = this.declarations[i].cssText();
      if (declText)
        rv += gTABS + this.declarations[i].cssText() + &quot;\n&quot;;
    }
    gTABS = preservedGTABS;
    return rv + gTABS + &quot;}&quot;;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (!token.isNotNull()) {
      if (parser.parseKeyframeRule(token, sheet, false)) {
        var newRule = sheet.cssRules[0];
        this.keyText = newRule.keyText;
        this.declarations = newRule.declarations;
        this.parsedCssText = newRule.parsedCssText;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspKEYFRAMES_RULE */
function jscsspKeyframesRule()
{
  this.type = kJscsspKEYFRAMES_RULE;
  this.parsedCssText = null;
  this.cssRules = [];
  this.name = null;
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspKeyframesRule.prototype = {
  cssText: function() {
    var rv = &quot;&quot;;
    var prefixes = [&quot;moz&quot;, &quot;webkit&quot;, &quot;ms&quot;, &quot;o&quot;, &quot;&quot;];
    for (var p = 0; p &lt; prefixes.length; p++) {
      rv += gTABS
            + &quot;@&quot; + (prefixes[p] ? &quot;-&quot; + prefixes[p] + &quot;-&quot; : &quot;&quot;) + &quot;keyframes &quot;
            + this.name + &quot; {\n&quot;;
      var preservedGTABS = gTABS;
      gTABS += &quot;  &quot;;
      for (var i = 0; i &lt; this.cssRules.length; i++)
        rv += gTABS + this.cssRules[i].cssText() + &quot;\n&quot;;
      gTABS = preservedGTABS;
      rv += gTABS + &quot;}\n\n&quot;;
    }
    return rv;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (token.isAtRule(&quot;@-mozkeyframes&quot;)) {
      if (parser.parseKeyframesRule(token, sheet)) {
        var newRule = sheet.cssRules[0];
        this.cssRules = newRule.cssRules;
        this.name = newRule.name;
        this.parsedCssText = newRule.parsedCssText;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspMEDIA_RULE */

function jscsspMediaRule()
{
  this.type = kJscsspMEDIA_RULE;
  this.parsedCssText = null;
  this.cssRules = [];
  this.media = [];
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspMediaRule.prototype = {
  cssText: function() {
    var rv = gTABS + &quot;@media &quot; + this.media.join(&quot;, &quot;) + &quot; {\n&quot;;
    var preservedGTABS = gTABS;
    gTABS += &quot;  &quot;;
    for (var i = 0; i &lt; this.cssRules.length; i++)
      rv += this.cssRules[i].cssText() + &quot;\n&quot;;
    gTABS = preservedGTABS;
    return rv + gTABS + &quot;}&quot;;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (token.isAtRule(&quot;@media&quot;)) {
      if (parser.parseMediaRule(token, sheet)) {
        var newRule = sheet.cssRules[0];
        this.cssRules = newRule.cssRules;
        this.media = newRule.media;
        this.parsedCssText = newRule.parsedCssText;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspNAMESPACE_RULE */

function jscsspNamespaceRule()
{
  this.type = kJscsspNAMESPACE_RULE;
  this.parsedCssText = null;
  this.prefix = null;
  this.url = null;
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspNamespaceRule.prototype = {
  cssText: function() {
    return &quot;@namespace &quot; + (this.prefix ? this.prefix + &quot; &quot;: &quot;&quot;)
                        + this.url
                        + &quot;;&quot;;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (token.isAtRule(&quot;@namespace&quot;)) {
      if (parser.parseNamespaceRule(token, sheet)) {
        var newRule = sheet.cssRules[0];
        this.url = newRule.url;
        this.prefix = newRule.prefix;
        this.parsedCssText = newRule.parsedCssText;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspPAGE_RULE */

function jscsspPageRule()
{
  this.type = kJscsspPAGE_RULE;
  this.parsedCssText = null;
  this.pageSelector = null;
  this.declarations = [];
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspPageRule.prototype = {
  cssText: function() {
    var rv = gTABS + &quot;@page &quot;
                   + (this.pageSelector ? this.pageSelector + &quot; &quot;: &quot;&quot;)
                   + &quot;{\n&quot;;
    var preservedGTABS = gTABS;
    gTABS += &quot;  &quot;;
    for (var i = 0; i &lt; this.declarations.length; i++)
      rv += gTABS + this.declarations[i].cssText() + &quot;\n&quot;;
    gTABS = preservedGTABS;
    return rv + gTABS + &quot;}&quot;;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (token.isAtRule(&quot;@page&quot;)) {
      if (parser.parsePageRule(token, sheet)) {
        var newRule = sheet.cssRules[0];
        this.pageSelector = newRule.pageSelector;
        this.declarations = newRule.declarations;
        this.parsedCssText = newRule.parsedCssText;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspSTYLE_RULE */

function jscsspStyleRule()
{
  this.type = kJscsspSTYLE_RULE;
  this.parsedCssText = null;
  this.declarations = []
  this.mSelectorText = null;
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspStyleRule.prototype = {
  cssText: function() {
    var rv = gTABS + this.mSelectorText + &quot; {&quot;;
    var preservedGTABS = gTABS;
    gTABS += &quot;  &quot;;
    for (var i = 0; i &lt; this.declarations.length; i++) {
      var declText = this.declarations[i].cssText();
      if (declText)
        rv += gTABS + this.declarations[i].cssText() ;
    }
    gTABS = preservedGTABS;
    return rv + &quot;\n&quot; + gTABS + &quot;}&quot;;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (!token.isNotNull()) {
      if (parser.parseStyleRule(token, sheet, false)) {
        var newRule = sheet.cssRules[0];
        this.mSelectorText = newRule.mSelectorText;
        this.declarations = newRule.declarations;
        this.parsedCssText = newRule.parsedCssText;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  },

  selectorText: function() {
    return this.mSelectorText;
  },

  setSelectorText: function(val) {
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (!token.isNotNull()) {
      var s = parser.parseSelector(token, true);
      if (s) {
        this.mSelectorText = s.selector;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  }
};

function jscsspStylesheet()
{
  this.cssRules = [];
  this.variables = {};
}

jscsspStylesheet.prototype = {
  insertRule: function(aRule, aIndex) {
    try {
     this.cssRules.splice(aIndex, 1, aRule);
    }
    catch(e) {
    }
  },

  deleteRule: function(aIndex) {
    try {
      this.cssRules.splice(aIndex);
    }
    catch(e) {
    }
  },

  cssText: function() {
    var rv = &quot;&quot;;
    for (var i = 0; i &lt; this.cssRules.length; i++)
      rv += this.cssRules[i].cssText() + &quot;\n\n&quot;;
    return rv;
  }
};

var kJscsspINHERIT_VALUE = 0;
var kJscsspPRIMITIVE_VALUE = 1;
var kJscsspVARIABLE_VALUE = 4;

function jscsspVariable(aType, aSheet)
{
  this.value = &quot;&quot;;
  this.type = aType;
  this.name  = null;
  this.parentRule = null;
  this.parentStyleSheet = aSheet;
}

jscsspVariable.prototype = {
  cssText: function() {
    if (this.type == kJscsspVARIABLE_VALUE)
      return this.resolveVariable(this.name, this.parentRule, this.parentStyleSheet);
    else
      return this.value;
  },

  setCssText: function(val) {
    if (this.type == kJscsspVARIABLE_VALUE)
      throw DOMException.SYNTAX_ERR;
    else
      this.value = val;
  },

  resolveVariable: function(aName, aRule, aSheet)
  {
    return &quot;var(&quot; + aName + &quot;)&quot;;
  }
};

/* kJscsspVARIABLES_RULE */

function jscsspVariablesRule()
{
  this.type = kJscsspVARIABLES_RULE;
  this.parsedCssText = null;
  this.declarations = [];
  this.parentStyleSheet = null;
  this.parentRule = null;
  this.media = null;
}

jscsspVariablesRule.prototype = {
  cssText: function() {
    var rv = gTABS + &quot;@variables &quot; +
                     (this.media.length ? this.media.join(&quot;, &quot;) + &quot; &quot; : &quot;&quot;) +
                     &quot;{\n&quot;;
    var preservedGTABS = gTABS;
    gTABS += &quot;  &quot;;
    for (var i = 0; i &lt; this.declarations.length; i++)
      rv += gTABS + this.declarations[i].cssText() + &quot;\n&quot;;
    gTABS = preservedGTABS;
    return rv + gTABS + &quot;}&quot;;
  },

  setCssText: function(val) {
    var sheet = {cssRules: []};
    var parser = new CSSParser(val);
    var token = parser.getToken(true, true);
    if (token.isAtRule(&quot;@variables&quot;)) {
      if (parser.parseVariablesRule(token, sheet)) {
        var newRule = sheet.cssRules[0];
        this.declarations = newRule.declarations;
        this.parsedCssText = newRule.parsedCssText;
        return;
      }
    }
    throw DOMException.SYNTAX_ERR;
  }
};

/* kJscsspWHITE_SPACE */

function jscsspWhitespace()
{
  this.type = kJscsspWHITE_SPACE;
  this.parsedCssText = null;
  this.parentStyleSheet = null;
  this.parentRule = null;
}

jscsspWhitespace.prototype = {
  cssText: function() {
    return this.parsedCssText;
  }
};

var kJscsspUNKNOWN_RULE   = 0;
var kJscsspSTYLE_RULE     = 1
var kJscsspCHARSET_RULE   = 2;
var kJscsspIMPORT_RULE    = 3;
var kJscsspMEDIA_RULE     = 4;
var kJscsspFONT_FACE_RULE = 5;
var kJscsspPAGE_RULE      = 6;

var kJscsspKEYFRAMES_RULE = 7;
var kJscsspKEYFRAME_RULE  = 8;

var kJscsspNAMESPACE_RULE = 100;
var kJscsspCOMMENT        = 101;
var kJscsspWHITE_SPACE    = 102;

var kJscsspVARIABLES_RULE = 200;

var kJscsspSTYLE_DECLARATION = 1000;

var gTABS = &quot;&quot;;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
